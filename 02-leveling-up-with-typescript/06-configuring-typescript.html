<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Configuring TypeScript</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="configuring-typescript"><a class="header" href="#configuring-typescript">Configuring TypeScript</a></h2>
<div style="text-align: right"> <i> Like the ancient master who chooses his brush, the wise coder sets 'strict' with care, for clarity is the first step to wisdom. <br> — Ancient Chinese proverb </i> </div>
<h3 id="creating-a-typescript-project"><a class="header" href="#creating-a-typescript-project">Creating a TypeScript Project</a></h3>
<p>We already learned how to create and run individual TypeScript files.
However, as with JavaScript, we will usually be working with larger projects.</p>
<p>Let's create a JavaScript project and add TypeScript support to it.</p>
<p>First, we create a directory where our project will reside:</p>
<pre><code class="language-sh">mkdir example
cd example
</code></pre>
<p>Next, we need to create the <code>package.json</code> file to indicate that this directory should be a JavaScript project:</p>
<pre><code class="language-sh">pnpm init
</code></pre>
<p>This will create a <code>package.json</code> file containing the project settings:</p>
<pre><code class="language-json">{
  "name": "example",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}
</code></pre>
<p>Next, let's create a <code>tsconfig.json</code> to indicate that this particular project will use TypeScript:</p>
<pre><code class="language-json">{
  "compilerOptions": {
    "strict": true
  }
}
</code></pre>
<p>Setting the <code>strict</code> option in <code>compilerOptions</code> is equivalent to running <code>tsc</code> with the <code>--strict</code> flag.
We will talk about this option in some more detail later.</p>
<blockquote>
<p>We could have also created the <code>tsconfig.json</code> file by running <code>tsc --init</code>, however this will add a lot of options that we really don't care about at the moment.</p>
</blockquote>
<p>Now, let's create an <code>index.ts</code> file:</p>
<pre><code class="language-ts">function getGreeting(name: string): string {
  return `Hello, ${name}!`;
}

console.log(getGreeting('World'));
</code></pre>
<p>Finally, we can compile the code:</p>
<pre><code class="language-sh">tsc
</code></pre>
<p>This will create approximately the following <code>index.js</code> file:</p>
<pre><code class="language-js">'use strict';
function getGreeting(name) {
  return 'Hello, '.concat(name, '!');
}
console.log(getGreeting('World'));
</code></pre>
<p>We can execute this file the same way we would execute any other JavaScript file:</p>
<pre><code class="language-sh">node index.js
</code></pre>
<p>There is one small modification we need to make to this process.
While using the globally installed TypeScript compiler is fine if you have a single project, you often might need to work on multiple projects at the same time.
Since these projects might use different TypeScript versions, we usually want to install <code>tsc</code> on a per-project basis.</p>
<p>Let's therefore install <code>tsc</code> as a dev (development) dependency (since we will not need it in the final code output):</p>
<pre><code class="language-sh">pnpm add --save-dev typescript
</code></pre>
<p>This will install TypeScript only for this particular project.
We can now run the <code>tsc</code> that was installed for this project using the following command:</p>
<pre><code class="language-sh">pnpm tsc
</code></pre>
<h3 id="using-modules-in-a-typescript-project"><a class="header" href="#using-modules-in-a-typescript-project">Using Modules in a TypeScript Project</a></h3>
<p>Now that we know how to create TypeScript projects in general, let's quickly talk about how we can use modules in TypeScript projects.
This process will be very similar to what we learned about JavaScript modules, except that we may need to make minor modifications to the <code>tsconfig.json</code> file.</p>
<p>Create a <code>src</code> directory containing the files <code>greet.ts</code> and <code>index.ts</code>.
You overall project structure should now look as follows:</p>
<pre><code>.
├── package.json
├── pnpm-lock.yaml
├── tsconfig.json
├── node_modules/
└── src/
    ├── index.ts
    └── greet.ts
</code></pre>
<p>Add the following exported function to <code>greet.ts</code>:</p>
<pre><code class="language-ts">export function getGreeting(name: string): string {
  return `Hello, ${name}!`;
}
</code></pre>
<p>Now, let's use <code>getGreeting</code> in <code>index.ts</code>:</p>
<pre><code class="language-ts">import { getGreeting } from './greet';

console.log(getGreeting('World'));
</code></pre>
<p>We could theoretically compile our project using this setup already.
However we will make a small modification to our <code>tsconfig.json</code> to avoid polluting the <code>src</code> directory with our compilation outputs.
To this end, we utilize the <code>outDir</code> option, which specifies the output directory, where TypeScript will put the compilation result.</p>
<p>Change your <code>tsconfig.json</code> file to be as follows:</p>
<pre><code class="language-ts">{
  "compilerOptions": {
    "strict": true,
    "outDir": "./dist"
  }
}
</code></pre>
<p>We can now compile again:</p>
<pre><code class="language-sh">pnpm tsc
</code></pre>
<p>The project structure looks like this now:</p>
<pre><code>.
├── package.json
├── pnpm-lock.yaml
├── tsconfig.json
├── node_modules/
├── src/
│   ├── index.ts
│   └── greet.ts
└── dist/
    ├── index.js
    └── greet.js
</code></pre>
<p>The files from <code>src</code> were successfully compiled and the compilation output is in <code>dist</code>.
We can now execute <code>index.js</code> by running:</p>
<pre><code class="language-sh">node ./dist/index.js
</code></pre>
<p>You should see <code>"Hello, World!"</code> logged to the console.</p>
<h3 id="including-and-excluding-files"><a class="header" href="#including-and-excluding-files">Including and Excluding Files</a></h3>
<p>Sometimes you want to include or exclude certain files from being processed by the TypeScript compiler.
To accomplish this, you can specify the <code>include</code> or <code>exclude</code> parameters in the <code>tsconfig.json</code>.</p>
<p>The <code>include</code> option takes an array of filenames or patterns to include in the program (relative to the directory containing the <code>tsconfig.json</code> file).
For example, we could include all files in <code>src</code> directory by setting <code>include</code> to <code>["src/**/*"]</code>.</p>
<p>The <code>src/**/*</code> notation is a so called glob pattern.
Here, <code>*</code> matches zero or more characters (excluding directory separators) and <code>**/</code> matches any directory (with arbitrary nesting).
Therefore, <code>src/**/*</code> means "match any file in the directory <code>src</code> and all its subdirectories (no matter how deeply nested)".</p>
<blockquote>
<p>Note that by default <code>include</code> is set to <code>["**/*"]</code> (i.e. it's set to match all files including arbitrarily nested subdirectories).</p>
</blockquote>
<p>The <code>exclude</code> parameter specifies an array of filenames or patterns that should be skipped when resolving <code>include</code>.
It is important to note that the <code>exclude</code> parameter does not necessarily exclude the file from your codebase—a file specified by <code>exclude</code> can still become part of your codebase if you import it somewhere.
The <code>exclude</code> parameter only changes which files are found by the <code>include</code> option.</p>
<p>Consider the following example.
Let's say that you have a bunch of <code>*.test.ts</code> files containing tests, like the following <code>greet.test.ts</code>:</p>
<pre><code class="language-ts">import { getGreeting } from './greet';

function testGreeting() {
  if (getGreeting('World') !== 'Hello, World!') {
    throw new Error('Test failed');
  }
}
</code></pre>
<blockquote>
<p>This is not how we would really write a test, but that's irrelevant for now.</p>
</blockquote>
<p>If we would run <code>pnpm tsc</code> right now, we would see the we have <code>greet.test.js</code> in the output which is probably not desirable, since the tests probably shouldn't be part of the final compilation output.</p>
<p>Therefore we could write the following <code>tsconfig.json</code>:</p>
<pre><code class="language-json">{
  "include": ["src/**/*"],
  "exclude": ["src/**/*.test.ts"],
  "compilerOptions": {
    "strict": true,
    "outDir": "./dist"
  }
}
</code></pre>
<p>If we delete the <code>dist</code> directory and run <code>pnpm tsc</code> again, we will see that <code>greet.test.js</code> is no longer present.</p>
<h3 id="compiler-options"><a class="header" href="#compiler-options">Compiler Options</a></h3>
<p>There a lot of compiler options that we can set in the <code>compilerOptions</code> section of <code>tsconfig.json</code> besides <code>strict</code> and <code>outDir</code>.
Let's discuss some of them.</p>
<h4 id="the-strict-option"><a class="header" href="#the-strict-option">The <code>strict</code> Option</a></h4>
<p>The <code>strict</code> option enables a wide range of—well—strict type checking.</p>
<p>Here is some example code that contains a few type issues:</p>
<pre><code class="language-ts">function getNumber(): number | undefined {
  return Math.random() &gt; 0.5 ? 0 : undefined;
}

function logNumber(n: number) {
  console.log(n);
}

function logAny(x) {
  console.log(x);
}

const number = getNumber();
logNumber(number);
logAny(number);
</code></pre>
<p>If we set <code>strict</code> to <code>false</code> (which it is by default), this code will (surprisingly) compile.</p>
<p>However, if we turn <code>strict</code> on, we get the errors that you would expect if you remember what you've learned in the previous sections of the TypeScript chapter:</p>
<pre><code class="language-ts">src/index.ts:9:17 - error TS7006: Parameter 'x' implicitly has an 'any' type.

9 function logAny(x) {
                  ~

src/index.ts:14:11 - error TS2345: Argument of type 'number | undefined' is not assignable to parameter of type 'number'.
  Type 'undefined' is not assignable to type 'number'.

14 logNumber(number);
             ~~~~~~


Found 2 errors in the same file, starting at: src/index.ts:9
</code></pre>
<p>You should <em>always</em> turn <code>strict</code> on, unless you have a really good reason not to (for example because you are migrating from a JavaScript or a very old TypeScript codebase).</p>
<h4 id="the-target-option"><a class="header" href="#the-target-option">The <code>target</code> Option</a></h4>
<p>Remember, how we talked about downleveling in the first section of this chapter?
The <code>target</code> option changes which JS features are downleveled and which are left as is.
For example, if <code>target</code> is <code>es5</code> template strings will be downleveled, but if it's <code>es2015</code> (equivalent to <code>es6</code>) they won't be, because template strings were introduced in ES2015.</p>
<p>Take this code:</p>
<pre><code class="language-ts">const world = 'World';
console.log(`Hello ${world}`);
</code></pre>
<p>If <code>target</code> is set to <code>es5</code>, it would compile to this:</p>
<pre><code class="language-js">'use strict';
var world = 'World';
console.log('Hello '.concat(world));
</code></pre>
<p>If <code>target</code> is set to <code>es2015</code>, the compilation output would look like this:</p>
<pre><code class="language-js">'use strict';
const world = 'World';
console.log(`Hello ${world}`);
</code></pre>
<p>This is because with <code>target</code> set to <code>es5</code> the template string had to be downleveled.</p>
<p>Some valid targets are:</p>
<ul>
<li><code>es5</code></li>
<li><code>es2015</code> (equivalent to <code>es6</code>)</li>
<li><code>es2016</code> up to <code>es2022</code></li>
</ul>
<p>There is also the <code>esnext</code> target which refers to the highest version of TypeScript.
This target should be used with caution since it means different things between different TypeScript versions.</p>
<p>Modern browsers support all <code>es6</code> features, so <code>es6</code> is often a good choice.
You might choose to set a lower target though if your code is deployed to older environments.
Alternatively, you might choose a higher target if your code is guaranteed to run in newer environments.</p>
<h4 id="the-lib-option"><a class="header" href="#the-lib-option">The <code>lib</code> Option</a></h4>
<p>The <code>lib</code> option allows you to specify libraries to be included in the compilation.
Basically, you can use this to let TypeScript know which APIs will be available in the runtime environment.</p>
<p>Let's say we have this code which would only work in the browser since it attaches an event listener to the browser <code>document</code>:</p>
<pre><code class="language-ts">document.addEventListener('DOMContentLoaded', () =&gt; {
  console.log('DOM has loaded');
});
</code></pre>
<p>If we set <code>lib</code> to <code>["es2015"]</code>, we will get a bunch of compilation errors:</p>
<pre><code>src/index.ts:1:1 - error TS2584: Cannot find name 'document'. Do you need to change your target library? Try changing the 'lib' compiler option to include 'dom'.

1 document.addEventListener('DOMContentLoaded', () =&gt; {
  ~~~~~~~~

src/index.ts:2:5 - error TS2584: Cannot find name 'console'. Do you need to change your target library? Try changing the 'lib' compiler option to include 'dom'.

2     console.log("DOM has loaded");
      ~~~~~~~


Found 2 errors in the same file, starting at: src/index.ts:1
</code></pre>
<p>But if we set <code>lib</code> to <code>["es2015", "dom"]</code> the compilation errors go away since TypeScript now introduces the DOM types into the compilation process.</p>
<h4 id="the-noemit-option"><a class="header" href="#the-noemit-option">The <code>noEmit</code> Option</a></h4>
<p>The <code>noEmit</code> option can be set to <code>true</code> to not produce JavaScript output.
This makes room for another tool to convert the TypeScript files to something that can be run inside a JavaScript environment.</p>
<p>This is often done when we only want to use TypeScript as a type checker (as is common in many projects) or to provide suggestions in your coding editor.</p>
<h3 id="an-example-tsconfigjson"><a class="header" href="#an-example-tsconfigjson">An Example <code>tsconfig.json</code></a></h3>
<p>You now learned about some of the most important <code>tsconfig.json</code> settings!
Here is an example <code>tsconfig.json</code> to summarize your newfound knowledge:</p>
<pre><code class="language-json">{
  "include": ["src/**/*"],
  "exclude": ["src/**/*.test.ts"],
  "compilerOptions": {
    "strict": true,
    "noEmit": true,
    "target": "es2015",
    "lib": ["es2015", "dom"]
  }
}
</code></pre>
<p>In this case, we don't produce compilation output, but only type check the code (due to <code>noEmit</code> being <code>true</code>).
We only look at the files in <code>src</code> and its subdirectories, ignoring the <code>*.test.ts</code> file (because of the <code>include</code> and <code>exclude</code> setting).</p>
<p>Finally, the type checking process is strict (due to <code>noEmit</code> being <code>true</code>), all features that are not available before ES2015 will be downleveled (since <code>target</code> is <code>es2015</code>) and we can use the DOM API types.</p>
<h3 id="reusing-a-tsconfigjson"><a class="header" href="#reusing-a-tsconfigjson">Reusing a <code>tsconfig.json</code></a></h3>
<p>The <code>extends</code> option can be used to inherit from another configuration file.</p>
<p>For example, we might have a <code>base.json</code> configuration file like this:</p>
<pre><code class="language-json">{
  "compilerOptions": {
    "strict": true
  }
}
</code></pre>
<p>Now, the <code>tsconfig.json</code> could extend this file:</p>
<pre><code class="language-json">{
  "extends": "base.json",
  "include": ["src/**/*.ts"],
  "compilerOptions": {
    "noEmit": true
  }
}
</code></pre>
<p>The resulting configuration would be strict and not emit JavaScript files.</p>
<p>This feature is particularly useful because it allows someone to write a TypeScript configuration file that specifies the settings that should be applied to TypeScript codebases in a company or a project and then everyone can simply extend this configuration file.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../02-leveling-up-with-typescript/05-generics.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../03-networking-fundamentals/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../02-leveling-up-with-typescript/05-generics.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../03-networking-fundamentals/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
