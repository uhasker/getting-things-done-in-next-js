<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="title-page.html">Getting things done in Next.js</a></li><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="chapter1/index.html"><strong aria-hidden="true">1.</strong> A brief introduction to JavaScript</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter1/01-hello-world.html"><strong aria-hidden="true">1.1.</strong> Hello world</a></li><li class="chapter-item expanded "><a href="chapter1/02-primitive-data-types.html"><strong aria-hidden="true">1.2.</strong> Primitive data types</a></li><li class="chapter-item expanded "><a href="chapter1/03-arrays-and-objects.html"><strong aria-hidden="true">1.3.</strong> Arrays and objects</a></li><li class="chapter-item expanded "><a href="chapter1/04-control-flow.html"><strong aria-hidden="true">1.4.</strong> Control flow</a></li><li class="chapter-item expanded "><a href="chapter1/05-functions.html"><strong aria-hidden="true">1.5.</strong> Functions</a></li><li class="chapter-item expanded "><a href="chapter1/06-functional-thinking.html"><strong aria-hidden="true">1.6.</strong> Functional thinking</a></li></ol></li><li class="chapter-item expanded "><a href="chapter2/index.html"><strong aria-hidden="true">2.</strong> The client</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter2/01-html-and-the-dom.html"><strong aria-hidden="true">2.1.</strong> HTML and the DOM</a></li><li class="chapter-item expanded "><a href="chapter2/02-first-steps-in-react.html"><strong aria-hidden="true">2.2.</strong> First steps in React</a></li><li class="chapter-item expanded "><a href="chapter2/03-introducing-jsx.html"><strong aria-hidden="true">2.3.</strong> Introducing JSX</a></li><li class="chapter-item expanded "><a href="chapter2/04-react-components.html"><strong aria-hidden="true">2.4.</strong> React components</a></li><li class="chapter-item expanded "><a href="chapter2/05-project-structure.html"><strong aria-hidden="true">2.5.</strong> Project structure</a></li><li class="chapter-item expanded "><a href="chapter2/06-react-state.html"><strong aria-hidden="true">2.6.</strong> React state</a></li></ol></li><li class="chapter-item expanded "><a href="chapter3/index.html"><strong aria-hidden="true">3.</strong> The server</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chapter3/01-a-http-primer.html"><strong aria-hidden="true">3.1.</strong> A HTTP primer</a></li><li class="chapter-item expanded "><a href="chapter3/02-writing-the-api.html"><strong aria-hidden="true">3.2.</strong> Writing the API</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="getting-things-done-in-mern"><a class="header" href="#getting-things-done-in-mern">Getting things done in MERN</a></h1>
<p><em>by Mikhail Berkov and Jannis Morgenstern</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<div style="text-align: right"> <i>No one reads introductions anyway.<br> — Sun Tzu</i></div>
<p>Long gone are the times when JavaScript was just a scripting language to add simple interactive behaviour to websites. The ECMAScript 2015 standard significantly improved the usability of the language. Excellent UI libraries like React allow you to write straightforward declarative code which massively simplifies building user interfaces. Thanks to Node.js you can write JavaScript on the server. Express.js empowers you to write complex APIs very quickly and MongoDB provides a document-oriented database that fits right in with the other tools. The MERN stack (<strong>M</strong>ongoDb, <strong>E</strong>xpress.js, <strong>R</strong>eact, <strong>N</strong>ode.js) therefore allows you to quickly develop complex applications using just one language - JavaScript (with optional static typing via TypeScript).</p>
<p>This book serves as an introduction to the MERN stack. However you don't learn software development by <em>just</em> reading books, you learn it by creating projects. We will therefore not bombard you with useless language trivia for hundreds of pages. If you care about that, go read the standard - it's <em>pretty comprehensive</em>. Instead we will create a real software project - an application for managing tasks called <strong>easy-opus</strong> (get it?). We will begin with nothing more than an empty project directory and the <em>will to learn</em>. We will end with a useful piece of software that allows us to create tasks, assign tasks to different users, update their statuses and much more.</p>
<p>This book is therefore <em>inherently practical</em> - unlike some other literature we will not dwell much on theoretical considerations. On the other hand, purely practical concerns are first-class citizens here (for example there is an entire chapter devoted to hosting your application). This doesn't mean that <em>theory bad, practice good</em>. It simply means that the approach for <em>this particular book</em> is heavily geared towards completing a real software project.</p>
<p>This book is therefore also <em>not</em> about becoming <em>yet another JavaScript guru</em>™ (there are already too many of them). It's about writing a useful product. It is fundamentally about <strong>getting things done</strong>. The MERN stack is really just a tool we use to get things done.</p>
<p>This book is suitable for both beginners who want to pick up their first tech stack as well as for seasoned software developers looking to expand their knowledge.</p>
<p>This book is intended to be a standalone resource. While there are resources for further reading in each section, these are merely pointers if you want to dive deeper into a certain topic. You <em>don't have</em> to read them and you should be able to understand everything without reading them. In fact, if you are hard stuck in a certain place, this probably represents a failure on our part. Maybe we didn't explain an important concept well enough (or at all!). Don't hesitate to write an email to <code>uhasker@protonmail.com</code> or to create an issue at <code>https://github.com/uhasker/getting-things-done-in-mern</code> explaining your problem.</p>
<p><em>Happy hacking</em></p>
<p><em>Mikhail Berkov and Jannis Morgenstern</em></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-1-a-brief-introduction-to-javascript"><a class="header" href="#chapter-1-a-brief-introduction-to-javascript">Chapter 1: A brief introduction to JavaScript</a></h1>
<div style="text-align: right"> <i> JavaScript has beauty, but not everyone sees it. <br> - Confucius </i> </div>
<p>First we will need to go through the basics of the JavaScript language that we will use pretty much everywhere throughout this book. After all the Next.js stack is built on top of it.</p>
<p>You will setup your runtime, learn about variables, data types, operators and control flow. You will also learn how to write functions and how to think <em>functionally</em>. Thinking <em>functionally</em> will make you a better software developer and a better person. Isn't that great?</p>
<p>Let's dive right in!</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="hello-world"><a class="header" href="#hello-world">Hello world</a></h2>
<div style="text-align: right"> <i> A journey of a thousand miles begins with a single "Hello, world!" program. <br> — Ancient Chinese proverb </i> </div>
<h3 id="runtime-environments"><a class="header" href="#runtime-environments">Runtime environments</a></h3>
<p>Contrary to popular belief, code sadly doesn't run on magic or unicorn tears. Instead, it runs on something called a <strong>runtime</strong> (also referred to as <em>runtime environment</em>). Put simply, a runtime is a program capable of executing code written in some programming language. It <em>provides the environment in which programs can run</em>. In order to execute all the <em>awesome</em> JavaScript code we are about to write, we therefore need a runtime first.</p>
<p>There are two runtimes capable of executing JavaScript code which are relevant to this book - the browser and Node.js. Every runtime environment comes with a <strong>console</strong> which allows us to interact with and observe the output of JavaScript code.</p>
<p>In this section we will setup the browser and Node.js runtimes. Then we will print &quot;Hello, world!&quot; both to the browser console and to the Node.js console to test that our setup works as expected.</p>
<h3 id="the-browser-environment"><a class="header" href="#the-browser-environment">The browser environment</a></h3>
<p>Open a browser and open the console in your browser. If you are using <em>Firefox</em> the shortcut for opening the console is <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>K</kbd> on Windows or Linux and <kbd>Cmd</kbd> + <kbd>Shift</kbd> + <kbd>K</kbd> on a Mac. If you are using <em>Chrome</em> or <em>Microsoft Edge</em> the shortcut is <kbd>Ctrl</kbd> + <kbd>Shift</kbd> + <kbd>J</kbd> on Windows or Linux and <kbd>Cmd</kbd> + <kbd>Option</kbd> + <kbd>J</kbd> on a Mac.</p>
<blockquote>
<p>If you are using Internet Explorer, please navigate to <code>google.com</code> and search for &quot;Firefox&quot; to install a <em>real</em> browser. This line was originally intended to be a funny joke, but on June 15, 2022 Microsoft ended support for Internet Explorer, so it's not even a joke anymore. We recommend Firefox, but this is purely a personal preference. Chrome and Microsoft Edge are absolutely fine as well.</p>
</blockquote>
<p>This is how the browser console will approximately look like on Firefox:</p>
<p><img src="chapter1/images/browser-console.png" alt="" /></p>
<blockquote>
<p>Note that if you see a bunch of scary error or warning messages upon opening the console, <em>don't panic</em> (this is also good life advice in general). Most of these will probably come from various extensions you might have installed or the web page you are currently viewing. Simply delete the messages by clicking the icon in the top left of the console (trash can in Firefox - might vary in different browsers), as we don't care about them.</p>
</blockquote>
<p>The browser as well as the Node.js console have <strong>REPL</strong> (read-eval-print-loop) capabilities. This just means that you can type some code into the console directly and execute it. REPLs are very nice, because they allow you to quickly test what you just learned.</p>
<p>Let's print something using the <code>console.log</code> method. Type the following into the browser console:</p>
<pre><code class="language-javascript">console.log('Hello, world!');
</code></pre>
<p>Now hit <kbd>Return</kbd> (you may also know this as <kbd>Enter</kbd> or simply <kbd>⏎</kbd>). You will see the output &quot;Hello, world!&quot; in the console:</p>
<p><img src="chapter1/images/browser-console-log.png" alt="" /></p>
<blockquote>
<p>Ignore the &quot;undefined&quot; for now.</p>
</blockquote>
<p>Hooray, we printed something to the browser console! This is the point at which you go tell everyone that you are now a <em>programmer</em>™.</p>
<h3 id="executing-javascript-from-an-html-file"><a class="header" href="#executing-javascript-from-an-html-file">Executing JavaScript from an HTML file</a></h3>
<p>Instead of executing JavaScript in the browser console directly, we can (and often will) execute it from an HTML file. HTML is short for <em>HyperText Markup Language</em> and is the standard markup language for documents that should be displayed in a browser. We will cover HTML in chapter 2 - for now we just want to get a quick glimpse at it.</p>
<p>Create a new HTML file. We will call it <em>hello.html</em>, however you can name it whatever you want. The filename should have an <em>html</em> extension though.</p>
<blockquote>
<p>If you are on a Windows machine, you probably cannot create a file with an <code>html</code> extension directly. In that case simply create an empty <code>txt</code> file and change the extension to <code>html</code>.</p>
</blockquote>
<p>Open the HTML file in any text editor (we recommend you use <a href="https://code.visualstudio.com">Visual Studio Code</a>) and add the following text to the file:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;&lt;/head&gt;
  &lt;body&gt;
    &lt;script&gt;
      console.log('Hello, world!');
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Don't forget to save the file!</p>
<blockquote>
<p>Note the semicolon after the console.log. It terminates the <code>console.log</code> statement. The semicolon is not technically required here. Indeed there are many JavaScript programmers who don't write semicolons. However to avoid a bunch of pitfalls we will use semicolons throughout this book and therefore we want you to get used to them as soon as possible.</p>
</blockquote>
<p>Now open this file in your browser. If the <code>html</code> file extension is associated with your browser, you should be able to do so by simply double-clicking the file. If this is not the case, <em>right-click</em> the file. A menu containing the option &quot;Open with&quot; should pop up. Click on any browser name from the &quot;Open with&quot; submenu. This is how it would look like on Windows 11:</p>
<p><img src="chapter1/images/open-with.png" alt="" /></p>
<p>Alternatively just copy the path of the file and paste it into the address bar of your browser prefixed by <code>file:///</code>. For example if the file name is <code>C:/Users/Example/Desktop/hello.html</code>, you can open the file by typing <code>file:///C:/Users/Example/Desktop/hello.html</code> into the address bar and hitting <kbd>Return</kbd>:</p>
<p><img src="chapter1/images/address-bar.png" alt="" /></p>
<blockquote>
<p>You can find out the path of a file by right-clicking the file and selecting <em>Properties</em>. The window that opens should show the file location.</p>
</blockquote>
<p>After opening this file in your browser, open the console again. You should see &quot;Hello, world!&quot; printed there.</p>
<h3 id="nodejs"><a class="header" href="#nodejs">Node.js</a></h3>
<p>For a long time, programmers used JavaScript mostly inside the browser runtime environment. However in 2009 Node.js came along and changed that by allowing programmers to easily run JavaScript outside the browser.</p>
<p>Node.js will probably not be installed on your machine, so let's fix that. Grab Node.js from <code>https://nodejs.org</code>:</p>
<p><img src="chapter1/images/node-js.png" alt="" /></p>
<blockquote>
<p>Note that by the time you are reading this book the Node.js version you see on <code>https://nodejs.org</code> might be different.</p>
</blockquote>
<p>You want to download the LTS (long term support) version. Click the big green button with the <em>LTS</em> version. This will download a Windows installer file. Execute the installer file just like you would execute any installer by double-clicking it. You will be presented with a bunch of options during the installation - just click &quot;Next&quot; everywhere and you will be fine.</p>
<p>Now we need to open a <strong>command-line interface</strong> (also called command line, command prompt or CLI) on our computer. A command line allows you to execute various tasks (called commands) on your computer.</p>
<p>On Windows, you can open the CLI by opening the &quot;Run&quot; window using <kbd>Win</kbd> + <kbd>R</kbd>, typing <em>cmd</em> and pressing the &quot;Ok&quot; button:</p>
<p><img src="chapter1/images/run-window.png" alt="" /></p>
<p>Alternatively you can type &quot;cmd&quot; into the search field. An app called &quot;command prompt&quot; should show up. Simply click the app and a CLI should open:</p>
<p><img src="chapter1/images/search-field.png" alt="" /></p>
<p>No matter how you do it, you should now stare at a <em>beautiful</em> command line. Take a second and <em>bask in it's glory</em> for a while.</p>
<p>After you're done basking, let's try and execute a command. For example we can use the <code>echo</code> command to output text. Try typing the following in your CLI:</p>
<pre><code class="language-shell">echo &quot;Hello, world!&quot;
</code></pre>
<p>Now hit <kbd>Return</kbd> and you should see the following result:</p>
<p><img src="chapter1/images/cli.png" alt="" /></p>
<p>Note that on a Mac you can open the command line by hitting <kbd>Cmd</kbd> + <kbd>Space</kbd> to open <em>search</em>, typing <em>terminal</em> and hitting <kbd>Return</kbd>.</p>
<blockquote>
<p>If you're on a Linux system you should <em>really</em> know how to open a command line.</p>
</blockquote>
<p>Now that the command line is open, execute the <code>node</code> command to open a Node.js console. You can do so by typing <code>node</code> and hitting <kbd>Return</kbd>. You should see something like the following (again the Node.js version might be different):</p>
<p><img src="chapter1/images/cli-node.png" alt="" /></p>
<p>Now let's again print &quot;Hello, world!&quot; using the <code>console.log</code> method. Type the following into the Node.js console and hit <kbd>Return</kbd>:</p>
<pre><code class="language-javascript">console.log('Hello, world!');
</code></pre>
<p>You should see &quot;Hello, world!&quot; printed to the console:</p>
<p><img src="chapter1/images/node-js-console-log.png" alt="" /></p>
<h3 id="executing-a-file"><a class="header" href="#executing-a-file">Executing a file</a></h3>
<p>Before moving on, let's execute a JavaScript file containing some code. Create a file named <code>hello.js</code>. Open the file in any text editor (preferably Visual Studio Code) and add the following content to the file:</p>
<pre><code class="language-javascript">console.log('Hello, world!');
</code></pre>
<blockquote>
<p>If you are on a Windows machine, you probably cannot create a file with a <code>js</code> extension directly. In that case simply create an empty <code>txt</code> file and change the extension to <code>js</code>.</p>
</blockquote>
<p>Again open a command line and <em>change the current directory location to the directory containing the JavaScript file</em>. You can do so using the <em>cd</em> command. For example if <code>hello.js</code> is located at <code>C:/Users/Example/Desktop</code> you would execute the following:</p>
<pre><code class="language-shell">cd C:/Users/Example/Desktop
</code></pre>
<blockquote>
<p>You can find out the directory containing the JavaScript file by right-clicking the file and selecting <em>Properties</em>. The resulting window should show the directory path.</p>
</blockquote>
<p>Now execute the JavaScript file by running:</p>
<pre><code class="language-shell">node hello.js
</code></pre>
<p>This should again print &quot;Hello, world!&quot;:</p>
<p><img src="chapter1/images/node-js-hello-js.png" alt="" /></p>
<p>Note that for the remainder of chapter 1 you should follow along using the Node.js console as we will be discussing the language itself. Nevertheless, as we begin writing the project in chapter 2, we will have to write JavaScript for the browser runtime environment on a regular basis.</p>
<h3 id="statements-and-expressions"><a class="header" href="#statements-and-expressions">Statements and expressions</a></h3>
<p>Before we dive into JavaScript, you should know what statements and expressions are.</p>
<p>A <strong>statement</strong> is a syntactic unit responsible for executing some action. A program is then essentially a sequence of statements which should be executed when running the program. For example <code>console.log('Hello, world!')</code> is a statement which executes the action of printing &quot;Hello, world!&quot; to the console.</p>
<p>An <strong>expression</strong> is a syntactic unit that may be evaluated to get its value. For example <code>2 + 2</code> would be an expression which would evaluate to <code>4</code>. Note that since any expression also executes some action, any expression is therefore a statement.</p>
<p>You could put it this way: Statements in general are executed to make something happen, while expressions in specific are evaluated to produce a value.</p>
<h3 id="comments"><a class="header" href="#comments">Comments</a></h3>
<p>Everything that is after a double slash on a line in JavaScript is a <strong>comment</strong>. Comments are ignored by the runtime and therefore have no effect for the execution of your program:</p>
<pre><code class="language-javascript">// This is just a comment
// Comments have no effect
console.log('Hello, world!');
// Therefore this program is equivalent to the
// program from the previous chapter
</code></pre>
<p>We will heavily utilize comments throughout this book inside the code blocks to highlight important ideas.</p>
<blockquote>
<p>There is a lot of discussion on how much you should comment your programs. We will return to this when discussing functions. However one rule is that if your code is so terrible that it requires <em>extensive commentary</em> to explain its behavior or purpose, you should fix the code. Just like a work of art, your code should stand on it's own merits. Imagine <em>commenting</em> a work of art (oh, wait)... However it is better to have terrible code and comments than have terrible code and no comments.</p>
</blockquote>
<p>We will also adopt the convention that if a comment is next to a line with a <code>console.log</code> statement, that comment shows the output that would be logged to the console if the code was run. For example:</p>
<pre><code class="language-javascript">console.log('Hello, world!'); // Hello, world!
</code></pre>
<p>This is the point where we tell you that while you are reading this book you should <em>absolutely follow along in some runtime</em> (probably Node.js, but a browser is fine too). This is <em>very important</em>. Go ahead and open a Node.js console <em>now</em>.</p>
<p>Come on, we'll wait...</p>
<p>...</p>
<p>...</p>
<p>...</p>
<p><em>Finally</em>. Let's move on.</p>
<h3 id="summary"><a class="header" href="#summary">Summary</a></h3>
<p>You learned about JavaScript runtimes and the console. You also learned how to print &quot;Hello, world!&quot; to the console to check that your runtime works as expected.</p>
<h3 id="further-reading"><a class="header" href="#further-reading">Further reading</a></h3>
<p>There is no further reading for this section.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="primitive-data-types"><a class="header" href="#primitive-data-types">Primitive data types</a></h2>
<div style="text-align: right"> <i> == is the equality operator <br> === is the one and true equality operator <br> ==== is the equality operator which transcends time and space <br> ===== is the equality operator which transcends all other equality operators <br> ======= is the equality operator which summons the UNSPEAKABLE DOOM h̷̳͓͝ě̵̞͂ ̵̮͍͊͋i̴͎͂s̵̗͒ ̷̘̤̓̅h̸͜͝ḙ̵̀r̶͈̆ȇ̶̗̱̍ ̸͕̾h̴̲̗̾̅e̷̟̋ả̶̬v̶̯́̐͜ẽ̸̛͔n̶̩̒͊ ̴̢̯̍ḣ̵̳̻e̴̙̒̓l̵͇̟̃p̶̘̑ ̷̠͛͝ŭ̴͇̯̕s̶̮͕̒ <br> — from "The Book of the Equality Operators and their Virtue" by Laozi </i> </div>
<h3 id="variables"><a class="header" href="#variables">Variables</a></h3>
<p>Whenever we write programs, we need to manipulate data. This data needs to be stored somewhere and we need to be able to access it somehow. We also need to deal with the fact that when we execute a program, the values we deal with are not predictable in advance. For example we don't know which tasks a user might create. Nevertheless, we must be able to access created tasks through a predictable name like <code>tasks</code> or <code>createdTasks</code>. Therefore we need a way to put an <em>unpredictable</em> value in storage and refer to it using a <em>predictable</em> name.</p>
<p>A <strong>variable</strong> is just that - a storage location containing a value which is referred to by a symbolic name. This <em>sounds</em> really fancy, but it just means that there is a value somewhere in your storage and you can refer to that value using a predictable name (even if the value itself is not predictable).</p>
<p>For example you could have a variable <code>x</code> which has the value <code>5</code> (we say that <code>x</code> is equal to <code>5</code>):</p>
<p><img src="chapter1/images/variable.png" alt="" /></p>
<p>Now even if the value of <code>x</code> changes (e.g. to <code>6</code>), the variable name doesn't change, only the value does. That is the variable name is still <code>x</code>, however now <code>x</code> has the value <code>6</code> (i.e. <code>x</code> is equal to <code>6</code>):</p>
<p><img src="chapter1/images/variable-changed.png" alt="" /></p>
<p>JavaScript lets you declare variables with the <code>let</code> keyword. You can assign values to variables using the <strong>assignment operator</strong> (<code>=</code>):</p>
<pre><code class="language-javascript">// Declare a variable
let x;

// Assign a value to a variable
x = 10;
</code></pre>
<p>We can print the value of the variable using the <code>console.log</code> method:</p>
<pre><code class="language-javascript">console.log(x); // 10
</code></pre>
<blockquote>
<p>If you follow along in the Node.js (or browser) console, you don't actually need to use the <code>console.log</code> method to print the value of a variable. Instead you can simply type the variable (or any expression for that matter) and the console will display its value.</p>
</blockquote>
<p>You can also have a declaration and an assignment on a single line. In fact, this is usually the way to go:</p>
<pre><code class="language-javascript">let y = 10;
</code></pre>
<p>The value of a variable may change over the course of a program:</p>
<pre><code class="language-javascript">let y = 10;
console.log(y); // 10

// Assign a new value to the variable
y = 20;
console.log(y); // 20
</code></pre>
<p>This will print <code>10</code> first and then <code>20</code>.</p>
<p>If you want to declare a symbolic name for a value that never changes, you can declare a <strong>constant</strong>. This is done using the <code>const</code> keyword:</p>
<pre><code class="language-javascript">const ten = 10;
</code></pre>
<p>If you try to reassign a value to a constant, you get an error. For example if you do</p>
<pre><code class="language-javascript">const ten = 10;
ten = 20;
</code></pre>
<p>you get</p>
<pre><code>Uncaught TypeError: Assignment to constant variable.
</code></pre>
<p>You will almost exclusively see us using <code>const</code> instead of <code>let</code> from now on. Reassignment is not nearly as necessary as you might think right now.</p>
<blockquote>
<p>You can also declare variables using the <code>var</code> keyword. We will not cover it here and you essentially only need to know one thing about <code>var</code> - you should <em>basically never use it</em>. It's mostly a historical artifact of the language at this point.</p>
</blockquote>
<p>Any variable has a <strong>data type</strong> which denotes the range of values it can take and which operations can be performed on the variable. You can use the <code>typeof</code> operator to obtain the data type of a variable.</p>
<p>We begin with the <strong>primitive data types</strong>.</p>
<h3 id="numbers"><a class="header" href="#numbers">Numbers</a></h3>
<p>You've already encountered the <code>Number</code> data type:</p>
<pre><code class="language-javascript">const n = 10;
console.log(typeof n); // number
</code></pre>
<p>Any integer or real number is a <code>Number</code>. So far, so obvious. However there are also some other things which have type <code>Number</code> like <code>Infinity</code>. We don't care about these for now, just keep in mind that JavaScript numbers are more than just integers and reals.</p>
<pre><code class="language-javascript">console.log(typeof 42); // number
console.log(typeof -20); // number
console.log(typeof 3.4); // number
console.log(typeof -1.7); // number
console.log(typeof Infinity); // number
</code></pre>
<p>You can perform arithmetic on numbers using the usual arithmetic operators <code>+</code>, <code>-</code>, <code>*</code> and <code>/</code>. There is also the <code>%</code> (modulo) operator which returns the remainder of a division. Finally, there is the <code>**</code> operator which does exponentiation:</p>
<pre><code class="language-javascript">const a = 3;
const b = 4;
console.log(a + b); // 7
console.log(a - b); // -1
console.log(a * b); // 12
console.log(a / b); // 0.75
console.log(a % b); // 3
console.log(a ** b); // 81
</code></pre>
<h3 id="booleans"><a class="header" href="#booleans">Booleans</a></h3>
<p>Another primitive type is the <code>Boolean</code> type. This allows you to represent values which are either <code>true</code> or <code>false</code>:</p>
<pre><code class="language-javascript">const thisBookIsAwesome = true;
const thisBookSucks = false;
console.log(typeof thisBookIsAwesome); // boolean
console.log(typeof thisBookSucks); // boolean
</code></pre>
<p>You can do simple logic using the logical operators <code>&amp;&amp;</code> (which denotes <strong>and</strong>), <code>||</code> (which denotes <strong>or</strong>) and <code>!</code> (which denotes <strong>not</strong>).</p>
<p>The <code>&amp;&amp;</code> (<em>and</em>) operator takes two values and evaluates to <code>true</code> only if both values are <code>true</code> and to <code>false</code> otherwise:</p>
<pre><code class="language-javascript">console.log(true &amp;&amp; true); // true
console.log(false &amp;&amp; true); // false
console.log(true &amp;&amp; false); // false
console.log(false &amp;&amp; false); // false
</code></pre>
<p>The <code>||</code> (<em>or</em>) operator takes two values and evaluates to <code>true</code> if <em>at least one</em> of the values is <code>true</code> (and to <code>false</code> otherwise):</p>
<pre><code class="language-javascript">console.log(true || true); // true
console.log(false || true); // true
console.log(true || false); // true
console.log(false || false); // false
</code></pre>
<p>The <code>!</code> (<em>not</em>) operator takes a single value and simply negates it:</p>
<pre><code class="language-javascript">console.log(!true); // false
console.log(!false); // true
</code></pre>
<p>Here is an example with all the operators together:</p>
<pre><code class="language-javascript">const b1 = true;
const b2 = false;
console.log(b1 &amp;&amp; b2); // false
console.log(b1 || b2); // true
console.log(!b1); // false
</code></pre>
<blockquote>
<p>Note that technically all the logical operators can take <em>any</em> value (not just boolean values). The result of the logical operator application is then dependent on whether the values are <em>truthy</em> or <em>falsy</em>. We will discuss this a bit later.</p>
</blockquote>
<p>A boolean variable is usually the result of an expression. Often it is the result of an expression containing the <strong>equality operator</strong> (<code>===</code>) which allows us to compare the values of variables:</p>
<pre><code class="language-javascript">const x1 = 5;
const x2 = 10;
const x3 = 5;
console.log(x1 === x1); // true
console.log(x1 === x2); // false
console.log(x1 === x3); // true
</code></pre>
<blockquote>
<p>There is also another equality operator (<code>==</code>). It can be best described as an April Fools' joke that somehow made it into the language. <em>Never use it</em>.</p>
</blockquote>
<p>If you want to write <em>not equals</em> you can use <code>!==</code>:</p>
<pre><code class="language-javascript">console.log(5 !== 10); // true
console.log(5 !== 5); // false
</code></pre>
<h3 id="strings"><a class="header" href="#strings">Strings</a></h3>
<p>Another primitive data type is the <code>String</code> type. A string is simply a bunch of characters and is used to represent text. Strings are usually written using single quotes in JavaScript:</p>
<pre><code class="language-javascript">const s = 'Some text';
console.log(typeof s); // string
</code></pre>
<blockquote>
<p>Note that it's also possible to write strings using double quotes, however in most projects strings are written using single quotes. We will stick to this convention.</p>
</blockquote>
<p>The <code>+</code> operator works on strings and does concatenation:</p>
<pre><code class="language-javascript">const s1 = 'MERN ';
const s2 = 'book';
console.log(s1 + s2); // MERN book
</code></pre>
<p>Note that instead of doing concatentation all the time you can also use <strong>template strings</strong> (also called template literals). This allows writing JavaScript expressions directly inside strings. Consider the following example:</p>
<pre><code class="language-javascript">const s = 'world';
const greeting = `Hello ${s}!`;
console.log(greeting); // Hello world!
</code></pre>
<p>Template strings are written using backticks (<em>not</em> single quotes). They may contain so called <em>placeholders</em> which are expressions embedded inside <code>${...}</code>. These expressions can be any valid JavaScript expression that evaluates to a value implicitly convertible to a string:</p>
<pre><code class="language-javascript">console.log(`2 + 2 = ${2 + 2}`); // 2 + 2 = 4
</code></pre>
<p>You can get the length (i.e. the number of characters) of a string like this:</p>
<pre><code class="language-javascript">const s = 'MERN book';
console.log(s.length); // 9
</code></pre>
<h3 id="undefined"><a class="header" href="#undefined">Undefined</a></h3>
<p>Finally there is one more primitive type that is of interest to us, namely <code>undefined</code>. There is only one value of this type, which is also called <code>undefined</code>. If a variable has the value <code>undefined</code> this (quite logically) means that it hasn't been defined. For example, whenever you have a variable that has been initialized, but not assigned to, it will automatically have the value and therefore the type <code>undefined</code>.</p>
<pre><code class="language-javascript">let someVariable;
console.log(someVariable); // undefined
console.log(typeof someVariable); // undefined
</code></pre>
<blockquote>
<p>Note that <code>string</code>, <code>number</code>, <code>boolean</code> and <code>undefined</code> are not the only primitive data types. Two other primitive data types are <code>symbol</code> and <code>bigint</code>. And there is one more primitive data type that we will encounter soon.</p>
</blockquote>
<h3 id="summary-1"><a class="header" href="#summary-1">Summary</a></h3>
<p>You learned how to declare variables using <code>let</code> and constants using <code>const</code>. You also learned about numbers, strings, booleans and <code>undefined</code>.</p>
<h3 id="further-reading-1"><a class="header" href="#further-reading-1">Further reading</a></h3>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Grammar_and_Types">JavaScript Guide - Grammar and types</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="arrays-and-objects"><a class="header" href="#arrays-and-objects">Arrays and objects</a></h2>
<div style="text-align: right"> <i> The object of the superior programmer is truthy. <br> — Confucius </i> </div>
<h3 id="arrays"><a class="header" href="#arrays">Arrays</a></h3>
<p>Let's say you are writing a task application (<em>just how did I come up with that example?</em>) and you need to store a bunch of tasks. You could of course declare a separate variable for every task like this:</p>
<pre><code class="language-javascript">const task1 = 'First task';
const task2 = 'Second task';
const task3 = 'Third task';
</code></pre>
<p>However this would quickly become very <em>tedious</em>. In addition you may want to add or delete tasks. Adding and deleting variables will become even more <em>tedious</em>. It would become almost as <em>tedious</em> as repeating the word <em>tedious</em> over and over. Did we mention that this is really <em>tedious</em>? As you can see, we need a way to store multiple values in a single variable.</p>
<p>A JavaScript <strong>array</strong> is an ordered collection of multiple values. You can declare an array using square brackets:</p>
<pre><code class="language-javascript">const tasks = ['First task', 'Second task', 'Third task'];
</code></pre>
<p>Note that an array is no longer a primitive type, instead arrays have type <code>object</code>:</p>
<pre><code class="language-javascript">console.log(typeof tasks); // object
</code></pre>
<p>You can access individual elements of an array using the index notation. You simply write the name of the array, followed by the position of the element you want to retrieve inside square brackets. Note that when we count the indices (positions), we starts at <code>0</code>, <em>not</em> at <code>1</code>:</p>
<pre><code class="language-javascript">console.log(tasks[0]); // First task
console.log(tasks[1]); // Second task
console.log(tasks[2]); // Third task
</code></pre>
<p>If the array index is too big, trying to access the element at that index will return <code>undefined</code>:</p>
<pre><code class="language-javascript">console.log(tasks[3]); // undefined
</code></pre>
<p>You can get the length of an array by using <code>.length</code>:</p>
<pre><code class="language-javascript">console.log(tasks.length); // 3
</code></pre>
<p>You can change an array element using the index notation and the assignment operator. For example here is how you would change the second element of the <code>tasks</code> array (remember that the second element has index <code>1</code>):</p>
<pre><code class="language-javascript">tasks[1] = 'Some other task';
console.log(tasks[1]); // Some other task
</code></pre>
<blockquote>
<p>Note that even despite the fact the <code>tasks</code> array is declared as a constant here, you can still change the <em>contents</em> of the array. However you can't <em>reassign</em> <code>tasks</code> to something else, i.e. you can't write something like <code>tasks = [1]</code>.</p>
</blockquote>
<p>JavaScript has some elegant syntax for working with arrays. If you want to assign variables based on values of an array, you would normally have to do something like this:</p>
<pre><code class="language-javascript">const firstTask = tasks[0];
const secondTask = tasks[1];
const thirdTask = tasks[2];
</code></pre>
<p>This is (you guessed it) <em>tedious</em>. Instead you can do this:</p>
<pre><code class="language-javascript">const [firstTask, secondTask, thirdTask] = tasks;
</code></pre>
<p>This is called <strong>array destructuring assignment</strong>. If you only care about some of the elements, you can use the <strong>spread</strong> (<code>...</code>) syntax:</p>
<pre><code class="language-javascript">const [firstTask, ...otherTasks] = tasks;
</code></pre>
<p>Something that commonly trips up beginners is trying to <em>copy</em> an array. Let's say you have an array of numbers called <code>arr</code> and you want to create a copy called <code>arr2</code>. You would probably try something like</p>
<pre><code class="language-javascript">const arr = [1, 2, 3, 4];
const arr2 = arr;
</code></pre>
<p>This is <em>wrong</em>. Let's try changing the first element of <code>arr</code> and look at <code>arr[0]</code> and <code>arr2[0]</code>:</p>
<pre><code class="language-javascript">arr[0] = 5;
console.log(arr[0]); // 5
console.log(arr2[0]); // 5
</code></pre>
<p>Uh-oh! That's probably not what we want. The reason for this behaviour is that <code>arr</code> and <code>arr2</code> both point to the same array. Remember how we were careful to introduce a variable <em>as a storage location together with a symbolic name</em>? Well, it turns out that <em>different symbol names</em> may refer to the <em>exact same storage location</em>. You can visualize it like this:</p>
<p><img src="chapter1/images/array-copy-incorrect.png" alt="" /></p>
<p>Here we have a storage location containing the values <code>1</code>, <code>2</code>, <code>3</code> and <code>4</code> somewhere. We also have two symbolic names <code>arr</code> and <code>arr2</code>. While the symbolic names are different, they point to the same storage location. Therefore if we change the storage location, we will observe a change via both symbolic names.</p>
<p>In order to actually copy the storage location as well, we can in fact use the spread syntax as this will <em>copy</em> the values:</p>
<pre><code class="language-javascript">const copied = [...arr];
</code></pre>
<p>Let's check that this indeed an actual copy:</p>
<pre><code class="language-javascript">arr[0] = 5;
console.log(arr[0]); // 5
console.log(copied[0]); // 1
</code></pre>
<p>This looks good. This is the mental picture you should have in your head for copying an array:</p>
<p><img src="chapter1/images/array-copy-correct.png" alt="" /></p>
<blockquote>
<p>If you only briefly skimmed the section on array destructuring and the spread syntax, go right back and read it carefully. These two concepts will come up <em>a lot</em> in the following chapters (much more often than you think right now).</p>
</blockquote>
<h3 id="objects"><a class="header" href="#objects">Objects</a></h3>
<p>Let's return to our (yet) imaginary task application. A task will probably be something more than just a string. For example it might contain an ID, a summary and a description. We could again store these in constants:</p>
<pre><code class="language-javascript">const taskId = 1;
const taskSummary = 'Read the MERN book';
const taskDescription = 'Read and understand the MERN book.';
</code></pre>
<p>As you can probably guess, this will quickly become <em>tedious</em> (oh no, not this again). <strong>Objects</strong> to the rescue! These allow us to store name-value pairs inside a single variable:</p>
<pre><code class="language-javascript">const task = {
  id: 1,
  summary: 'Read the MERN book',
  description: 'Read and understand the MERN book.',
};
</code></pre>
<p>Every such value is called a <strong>property</strong>. We can access properties using the dot notation or the square bracket notation. For example to access the <code>summary</code> property of the <code>task</code> object, you would write <code>task.summary</code> or <code>task['summary']</code>. Try it out:</p>
<pre><code class="language-javascript">console.log(task.id); // 1
console.log(task.summary); // Read the MERN book
console.log(task.description); // Read and understand the MERN book.
console.log(task['id']); // 1
console.log(task['summary']); // Read the MERN book
console.log(task['description']); // Read and understand the MERN book.
</code></pre>
<p>Properties don't have to be primitive values. They can also be other objects. Generally speaking, you can arbitrarily nest objects and arrays. For example, here is how you can nest an object inside an object:</p>
<pre><code class="language-javascript">const person = {
  name: 'John Doe',
  task: {
    id: 1,
    summary: 'Read the MERN book',
    description: 'Read and understand the MERN book.',
  },
};
</code></pre>
<p>In this case you can use the <code>.</code> notation to access properties at any nesting level. Let's you want to get the summary of the task that's been assigned to the <code>person</code>. Then you can write <code>person.task.summary</code>:</p>
<pre><code class="language-javascript">console.log(person.task.summary); // Read the MERN book
</code></pre>
<p>If you try to access a property that doesn't exist, the result will be <code>undefined</code> (there it is again):</p>
<pre><code class="language-javascript">console.log(task.date); // undefined
</code></pre>
<p>Sometimes you want to explicitly indicate that a property may be absent. For example a person may not have a task assigned to them. You could do something like this:</p>
<pre><code class="language-javascript">const person = {
  name: 'John Doe',
  task: undefined,
};
</code></pre>
<p>This has the <em>potential</em> problem that someone referring to <code>person.task</code> will have no idea whether it is <code>undefined</code> because the property is not supposed to exist at all or because it it simply absent for this particular person. This is why JavaScript introduced <code>null</code>:</p>
<pre><code class="language-javascript">const person = {
  name: 'Max Mustermann',
  task: null,
};
</code></pre>
<p>Basically <code>null</code> allows you to say - &quot;hey, this property does exist in principle, it's just absent for this particular variable&quot;. However note that this is only a convention. There is nothing that prevents you from using <code>undefined</code> to denote absence all the time and in fact we will do so in this very book. Just keep in mind that <code>null</code> exists and that some developers use it to indicate absence (and that it's totally fine to do so).</p>
<p>Remember how we said that there is one more primitive data type left? Well - there it is. The final primitive data type is <code>null</code>. This is something a lot of people are really confused about, because <code>typeof null</code> returns <code>object</code> (and not e.g. <code>null</code>). However this is primarily a technical detail. Despite the fact that <code>null</code> is a separate data type it doesn't hurt to think of it as an object (namely an absent one).</p>
<p>Just as with arrays, you can use <strong>destructuring assignment</strong> when working with objects:</p>
<pre><code class="language-javascript">const task = {
  id: 1,
  summary: 'Read the MERN book',
  description: 'Read and understand the MERN book.',
};
const { id, summary, description } = task;
</code></pre>
<p>And just like with arrays, you can use the spread syntax:</p>
<pre><code class="language-javascript">const taskWithAssignee = {
  assignee: 'Max',
  ...task,
};
console.log(taskWithAssignee);
</code></pre>
<p>This will print:</p>
<pre><code>{
  assignee: 'Max',
  id: 1,
  summary: 'Read the MERN book',
  description: 'Read and understand the MERN book.'
}
</code></pre>
<blockquote>
<p>Note that objects are more than just containers for values. We will talk about this in the section on functions.</p>
</blockquote>
<h3 id="summary-2"><a class="header" href="#summary-2">Summary</a></h3>
<p>You have learned how to work with arrays and objects. You have also learned about (array and object) destructuring and the spread syntax.</p>
<h3 id="further-reading-2"><a class="header" href="#further-reading-2">Further reading</a></h3>
<p>There is no further reading for this section.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="control-flow"><a class="header" href="#control-flow">Control flow</a></h2>
<div style="text-align: right"> <i> Don't push the for loop, it flows by itself. <br> — Ancient Chinese proverb </i> </div>
<h3 id="if-statements"><a class="header" href="#if-statements">If statements</a></h3>
<p>Quite often, we need to make <em>decisions</em> in our programs. Let's say we want to display a fancy message when a bunch of tasks are completed. This is a decision: <em>If</em> all the tasks are completed, <em>then</em> we want to display a message. Put generally: <em>If</em> a condition holds (is true), <em>then</em> we want to do something.</p>
<p>Conveniently, the language keyword that allows us to accomplish this is called <code>if</code>:</p>
<pre><code class="language-javascript">const completed = true;
if (completed) {
  console.log('Hooray, you completed all your tasks!');
}
</code></pre>
<p>This would print:</p>
<pre><code>Hooray, you completed all your tasks!
</code></pre>
<p>The general form of an <code>if</code> statement looks like this:</p>
<pre><code class="language-javascript">if (condition) {
  statements;
}
</code></pre>
<p>If <code>condition</code> is true, then the <code>statements</code> inside the curly braces will be executed. If <code>condition</code> is false, nothing will happen.</p>
<blockquote>
<p>Note that technically it suffices if the condition is <em>truthy</em> or <em>falsy</em>. We will ignore this detail for now and return to it in a second.</p>
</blockquote>
<p>The simplest condition is a boolean variable. However, nothing prevents us from writing more complex conditions. For example, let's say we have a list of uncompleted tasks (conveniently) named <code>tasks</code>. Then we could check that all tasks have been completed by checking whether <code>tasks</code> is empty (i.e. the length of <code>tasks</code> is zero):</p>
<pre><code class="language-javascript">if (tasks.length === 0) {
  console.log('Hooray, you completed all your tasks!');
}
</code></pre>
<p>Sometimes you need to do something in one case and something else in another case. The (also conveniently named) <code>else</code> keyword allows you to accomplish exactly that. Let's say that if all the tasks haven't been completed yet, we want to display a different message:</p>
<pre><code class="language-javascript">if (tasks.length === 0) {
  console.log('Hooray, you completed all your tasks!');
} else {
  console.log('You still have some tasks to complete.');
}
</code></pre>
<p>The general form of an <code>if...else</code> statement looks like this:</p>
<pre><code class="language-javascript">if (condition) {
  statements1;
} else {
  statements2;
}
</code></pre>
<p>If <code>condition</code> is true, the statements corresponding to <code>statements1</code> will be executed (i.e. the statements inside the curly braces after the <code>if</code>). If <code>condition</code> is false, the statements corresponding to <code>statements2</code> will be executed (i.e. the statements inside the curly braces after the <code>else</code>).</p>
<p>Also note that there may be multiple statements between the curly braces. This is totally valid:</p>
<pre><code class="language-javascript">if (tasks.length === 0) {
  console.log('Hooray, you completed all your tasks!');
  console.log('Congratulations!');
  console.log('No really, you are amazing!');
} else {
  console.log('You still have some tasks to complete.');
  console.log('Do not despair!');
}
</code></pre>
<p>Assuming <code>tasks</code> has a <code>length</code> of <code>0</code> this will print:</p>
<pre><code>Hooray, you completed all your tasks!
Congratulations!
No really, you are amazing!
</code></pre>
<p>Sometimes you need to handle more than two cases. Since JavaScript was fresh out of keywords at this point, they allowed you to do so using <code>else if</code>:</p>
<pre><code class="language-javascript">if (tasks.length === 0) {
  console.log('Hooray, you completed all your tasks!');
} else if (tasks.length === 1) {
  console.log('Only one task left! Go! Go! Go!');
} else {
  console.log('You still have some tasks to complete.');
}
</code></pre>
<p>The general form of an <code>if...else if...else</code> statement looks like this:</p>
<pre><code class="language-javascript">if (condition1) {
  statements1;
} else if (condition2) {
  statements2;
} /*possibly more else ifs*/ else if (conditionN) {
  statementsN;
} else {
  statementsElse;
}
</code></pre>
<p>Here all the conditions will be checked one after another. As soon as a condition is true, the corresponding statements will be executed. If no condition matches, the statements corresponding to <code>statementsElse</code> will be executed.</p>
<p>You can have any number of <code>else if</code> statements. For example this is valid:</p>
<pre><code class="language-javascript">if (tasks.length === 0) {
  console.log('Hooray, you completed all your tasks!');
} else if (tasks.length === 1) {
  console.log('Only one task left! Go! Go! Go!');
} else if (tasks.length === 2) {
  console.log('You have two tasks to do.');
} else if (tasks.length === 3) {
  console.log('There are three tasks left.');
} else {
  console.log('You still have some tasks to complete.');
}
</code></pre>
<p>Note that the <code>else</code> block is not required. If it's missing and none of the conditions are true, nothing will happen.</p>
<h3 id="truthiness-and-falsiness"><a class="header" href="#truthiness-and-falsiness">Truthiness and falsiness</a></h3>
<p>Note that the condition does not necessary have to be boolean as JavaScript will automatically convert non-boolean values to booleans. For example you could write something like this:</p>
<pre><code class="language-javascript">if (1) {
  console.log('1 is truthy.');
} else {
  console.log('1 is falsy.');
}
</code></pre>
<p>This will print &quot;1 is truthy.&quot; because JavaScript will consider <code>1</code> to be <code>true</code> in this context since <code>1</code> is a <em>truthy</em> value.</p>
<p>Generally speaking, a <strong>truthy</strong> value is considered to be true when encountered in a boolean context (like a condition). A <strong>falsy</strong> value is considered to be false when encountered in a boolean context. The most important falsy values are <code>false</code>, <code>0</code>, <code>''</code> (empty string), <code>null</code> and <code>undefined</code>. Most other values (like <code>1</code>, <code>[]</code> (empty array), <code>[3]</code>, <code>{ example: 'hello' }</code> etc) are truthy.</p>
<p>Try to <em>avoid using non-boolean values in boolean contexts</em> as it can lead to surprising behaviour. Nevertheless it's still useful to know about truthiness and falsiness, as it will otherwise trip you up in certain cases.</p>
<h3 id="ternary-operator"><a class="header" href="#ternary-operator">Ternary operator</a></h3>
<p>The <strong>ternary operator</strong> takes a <em>condition</em>, an <em>expression to execute if the condition is truthy</em> and an <em>expression to execute if the condition is falsy</em>. It looks like this:</p>
<pre><code class="language-javascript">const doneMsg = 'All tasks are done';
const notDoneMsg = 'There are tasks left';
const msg = done ? doneMsg : notDoneMsg;
</code></pre>
<p>The general form is:</p>
<pre><code class="language-javascript">condition ? expression1 : expression2;
</code></pre>
<p>There is a very common thing complete beginners do with ternary operators which looks like this:</p>
<pre><code class="language-javascript">const finished = tasks.length === 0 ? true : false;
</code></pre>
<p>You should stop for a second a think about why this is unneccessary.</p>
<p><em>Thought</em> about it? That's right. You can just write</p>
<pre><code class="language-javascript">const finished = tasks.length === 0;
</code></pre>
<p>Note that you cannot write arbitrary statements inside a ternary operator (and it wouldn't make a lot of sense anyway).</p>
<h3 id="optional-chaining"><a class="header" href="#optional-chaining">Optional chaining</a></h3>
<p>Consider the following task object:</p>
<pre><code class="language-javascript">const mernTask = {
  summary: 'Read the MERN book',
  description: 'Read and understand the MERN book',
  date: {
    day: 8,
    month: 6,
    year: 2022,
  },
};
</code></pre>
<p>Let's say we want to access the day of the task. We can do this by using <code>mernTask.date.day</code>. But what if the day does not have to be present, i.e. is <em>optional</em>? This could e.g. happen because the user didn't enter a task.</p>
<p>The object could look like this:</p>
<pre><code class="language-javascript">const mernTask = {
  summary: 'Read the MERN book',
  description: 'Read and understand the MERN book',
};

// or like this if you were to use `null`
const mernTask = {
  summary: 'Read the MERN book',
  description: 'Read and understand the MERN book',
  date: null,
};
</code></pre>
<p>Then <code>mernTask.date.day</code> will fail with</p>
<pre><code>Uncaught TypeError: Cannot read properties of undefined (reading 'day')
</code></pre>
<p>This makes sense since <code>mernTask.date</code> will result in <code>undefined</code> and you can't access a property on <code>undefined</code>. But let's say we would like to access the day and setting it to <code>undefined</code> if the <code>date</code> property is not present. Then we would need to do something like the following:</p>
<pre><code class="language-javascript">const day =
  typeof mernTask.date !== undefined &amp;&amp; mernTask.date !== null ? mernTask.date.day : undefined;
</code></pre>
<p>Alternatively we could make use of <code>&amp;&amp;</code> and write:</p>
<pre><code class="language-javascript">const day = mernTask.date &amp;&amp; mernTask.date.day;
</code></pre>
<p>Generally consider an object that has a bunch of values that may be absent (i.e. <code>null</code> or <code>undefined</code>). Working with such value will be annoying and only grow more cumbersome with deeper nesting. To avoid all this JavaScript allows you to do <strong>optional chaining</strong>. This works by writing <code>?.</code> instead of <code>.</code> when trying to work on something that may be undefined. The above line would then become:</p>
<pre><code class="language-javascript">const day = mernTask.date?.day;
</code></pre>
<p>Now the result will be <code>undefined</code> instead of giving you a TypeError.</p>
<h3 id="forof-loops"><a class="header" href="#forof-loops">For..of loops</a></h3>
<p><code>For..of</code> loops allow you to <em>iterate over arrays and strings</em> (and some other things that we will cover later on) and perform a task for each element / character. Let's say you want to print all tasks from a list named <code>tasks</code>. You could do it like this:</p>
<pre><code class="language-javascript">const tasks = ['Task 1', 'Task 2', 'Task 3'];
for (let task of tasks) {
  console.log(task);
}
</code></pre>
<p>This would print</p>
<pre><code>Task 1
Task 2
Task 3
</code></pre>
<p>As we already mentioned, you can use a <code>for..of</code> loop to iterate over a string:</p>
<pre><code class="language-javascript">const str = 'Task';
for (let char of str) {
  console.log(char);
}
</code></pre>
<p>This would print each charachter of the string, i.e.:</p>
<pre><code>T
a
s
k
</code></pre>
<p>The general syntax of a <code>for..of</code> loop is</p>
<pre><code class="language-javascript">for (let variable of arrayOrString) {
  statements;
}
</code></pre>
<p>It should be noted that if you don't change the variable inside the loop, you can and should also declare it as <code>const</code>. Our first example could therefore be rewritten to</p>
<pre><code class="language-javascript">const tasks = ['Task 1', 'Task 2', 'Task 3'];
for (const task of tasks) {
  console.log(task);
}
</code></pre>
<blockquote>
<p>There are also a bunch of other loops. We will cover them later. This is because you don't need them nearly as often as some people think.</p>
</blockquote>
<h3 id="summary-3"><a class="header" href="#summary-3">Summary</a></h3>
<p>You learned how to make decisions using <code>if</code> statements, <code>if...else</code> statements, <code>if...else if...else</code> statements and the ternary operator. You also learned how to address missing properties using <em>optional chaining</em>. Finally you learned how to iterate over strings and arrays using the <code>for...of</code> loop.</p>
<h3 id="further-reading-3"><a class="header" href="#further-reading-3">Further reading</a></h3>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Loops_and_iteration">JavaScript Guide - Loops and iteration</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<div style="text-align: right"> <i> "The best time to write a function was twenty years ago. But the second best time is today." <br> "That makes no sense." <br> "Actually, it kind of does if you think about the history of functional programming." <br> — Dialogue between a master and his student </i> </div>
<h3 id="declaring-and-calling-functions"><a class="header" href="#declaring-and-calling-functions">Declaring and calling functions</a></h3>
<p>When programming we often have to perform some common actions over and over again. For example we might want to get the list of tasks assigned to a user at multiple parts within our software. Instead of writing code that (essentially) does the same thing multiple times we could use a <strong>function</strong>.</p>
<p>Within the <strong>function definition</strong> we would specify what statements should be executed. Then we can write a <strong>function call</strong> (also called <strong>function invocation</strong>). This would then actually execute the statements specified in the definition. We can simply group common actions into a function and then just call the function whenever we need the execute those actions.</p>
<p>Here is a very simple function definition:</p>
<pre><code class="language-javascript">function printGreeting() {
  console.log('Hello world!');
}
</code></pre>
<p>Function definitions begin with the <code>function</code> keyword followed by the function name (in this case <code>printGreeting</code>). We will cover the meaning of the parentheses in a second, but the curly braces contain the <em>body</em> of the function. These are all the statements that will be executed when the function is called. In this case we have one statement, which will simply print <code>Hello world!</code> to the console.</p>
<p>You can call / invoke the <code>printGreeting</code> function by writing <code>printGreeting()</code>:</p>
<pre><code class="language-javascript">printGreeting(); // Hello world!
</code></pre>
<p>You can of course have as many statements as you want inside the function body:</p>
<pre><code class="language-javascript">function printGreetings() {
  console.log('Hello world!');
  console.log('Hello again!');
}
</code></pre>
<p>These functions are not particularly interesting since they do the exact same thing for every function call. In this case, we print the exact same greeting(s) every time. But what if we wanted to print a different greeting depending on the user (containing e.g. the user name)?</p>
<p>We can solve this by defining <strong>function parameters</strong>. This allows us to pass values into the function, so that the function can adjust its behaviour. The function parameters go between the parentheses:</p>
<pre><code class="language-javascript">function printGreeting(user) {
  console.log(`Hello ${user}!`);
}

printGreeting('Jane'); // Hello Jane!
</code></pre>
<p>In this example we have a single parameter called <code>user</code>. The function prints the greeting with the appropriate user. Within the function call we then pass the user (in this case <code>Jane</code>) as an <strong>argument</strong> to the function.</p>
<p>We can also <strong>return</strong> values from functions using the <code>return</code> keyword. Here is a function that takes a number and returns the square of it:</p>
<pre><code class="language-javascript">function square(num) {
  return num * num;
}
</code></pre>
<p>We can now use the function as follows:</p>
<pre><code class="language-javascript">const squaredNum = square(3);
console.log(squaredNum); // 9
</code></pre>
<h3 id="functions-are-objects"><a class="header" href="#functions-are-objects">Functions are objects</a></h3>
<p>Despite the fact that you get &quot;function&quot; when you use <code>typeof</code> with a function, functions are really just objects.</p>
<p>This means that we can assign functions as variables, pass them to other functions as arguments and do all the other neat things we can do with primitives and objects. For example we could assign the <code>square</code> function to a variable:</p>
<pre><code class="language-javascript">const square = function square(num) {
  return num * num;
};
</code></pre>
<p>We could then call this like a regular function by doing e.g. <code>square(3)</code>.</p>
<p>This is called a <strong>function expression</strong>. Note that the function may be <strong>anonymous</strong> here (i.e. it doesn't have a name). We could write this:</p>
<pre><code class="language-javascript">const square = function (num) {
  return num * num;
};
</code></pre>
<p>The syntax for calling such a function is still the same, e.g. we could write <code>square(3)</code>.</p>
<h3 id="arrow-functions"><a class="header" href="#arrow-functions">Arrow functions</a></h3>
<p>There is a shorthand notation available in JavaScript called the <strong>arrow function</strong> notation. This notation allows you to omit certain keywords in certain situations. For example here is how you could rewrite the <code>square</code> function using the arrow function notation:</p>
<pre><code class="language-javascript">const square = (num) =&gt; num * num;
</code></pre>
<p>This is much shorter and less <em>tedious</em> (haha) indeed.</p>
<p>For an arrow function you only have to specify the parameter(s), followed by an arrow, followed by the returned value. If you have multiple parameters, you need to put them inside parentheses:</p>
<pre><code class="language-javascript">const add = (x, y) =&gt; x + y;
</code></pre>
<p>You can also have multiple statements in the function body, but then you have to specify the <code>return</code> keyword and surround the statements with curly braces:</p>
<pre><code class="language-javascript">const printAndGreet = (user) =&gt; {
  const greeting = `Hello ${user}`;
  console.log(greeting);
  return greeting;
};
</code></pre>
<p>As you can see this is not too different from a regular function declaration or expression (unlike the <code>square</code> function, where the arrow notation was much shorter). It is therefore common practice to only use arrow functions for short functions like <code>square</code>. However this is again just convention.</p>
<p>One thing you might have noticed, is that we only showed you <strong>arrow function expressions</strong>. This is not an oversight but stems from the fact that there is no way to write a <strong>function declaration</strong> with the <strong>arrow function notation</strong>. Another difference is that <strong>arrow functions</strong> are <em>always</em> anonymous.</p>
<h3 id="methods"><a class="header" href="#methods">Methods</a></h3>
<p>A method is a function which is a property of an object.</p>
<pre><code class="language-javascript">const greeter = {
  greet: function () {
    console.log('Hello, world!');
  },
};
</code></pre>
<p>You can call a method like this:</p>
<pre><code class="language-javascript">greeter.greet(); // Hello, world!
</code></pre>
<p>Methods can refer to the properties of an object using the <code>this</code> keyword which is simply a reference to the current object:</p>
<pre><code class="language-javascript">const task = {
  id: 1,
  summary: 'Read the MERN book',
  description: 'Read and understand the MERN book.',
  longDescription: function () {
    return `${this.summary}(ID = ${this.id}): ${this.description}`;
  },
};
</code></pre>
<p>You can call the method by doing <code>task.longDescription()</code>. This would print:</p>
<pre><code>Read the MERN book(ID = 1): Read and understand the MERN book.
</code></pre>
<p>A method can also change the properties of an object using the <code>this</code> keyword.</p>
<p>We will not dwell on methods for too long, since we will not use them all that often as this would lead to a <em>ghastly</em> thing called <em>Object-Oriented Programming</em> (OOP for short). Instead we want you to think <em>functionally</em>, which is what the next section will be about.</p>
<blockquote>
<p>Inevitable disclaimer for <em>certain</em> Java/C#/... people: The sentence about OOP was a joke and used correctly, OOP has its merits. We just wanted to be funny. We're very sorry about that and will now perform the appropriate penance procedure.</p>
</blockquote>
<h3 id="summary-4"><a class="header" href="#summary-4">Summary</a></h3>
<p>You learned how to declare and call functions and methods. You also learned about the arrow notation as a convenient shorthand for functions.</p>
<h3 id="further-reading-4"><a class="header" href="#further-reading-4">Further reading</a></h3>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Functions">JavaScript Guide - Functions</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="functional-thinking"><a class="header" href="#functional-thinking">Functional thinking</a></h2>
<div style="text-align: right"> <i> Gold can't be pure, but functions can. <br> — Ancient Chinese proverb </i> </div>
<h3 id="pure-functions"><a class="header" href="#pure-functions">Pure functions</a></h3>
<p>A function is called <strong>pure</strong> if its outputs (the returned values) depend only on its inputs and if the function does not have any <em>side effects</em> (i.e. it doesn't change program state and doesn't write anything to an external data source).</p>
<p>Here is an example of a pure function:</p>
<pre><code class="language-javascript">const square = (x) =&gt; x * 2;
</code></pre>
<p>Indeed, the output of <code>square</code> depends only on its input and nothing else. In addition, <code>square</code> doesn't produce any side effects.</p>
<p>Here is an example of a function that is <em>not</em> pure:</p>
<pre><code class="language-javascript">const x = 2;
const addImpure = (y) =&gt; x + y;
</code></pre>
<p>The output of this function doesn't depend just on its input variables, but also on a global variable <code>x</code>.</p>
<p>Here is another function that's not pure:</p>
<pre><code class="language-javascript">const hello = () =&gt; console.log('Hello, world!');
</code></pre>
<p>The <code>hello</code> function has a side effect - it outputs something to the console.</p>
<p>Why do we care about all of this? The fundamental reason is that <em>pure functions are very easy to reason about</em>. There is practically no room for suprising behaviour.</p>
<p>Consider the above <code>square</code> function. It takes an input and produces an output that is dependent <em>only on the input</em>. It doesn't matter what the rest of the program is doing - the function will always produce identical outputs for identical inputs.</p>
<blockquote>
<p>If you are mathematically inclined, pure functions are basically regular mathematical functions. They take an input which is a member of some domain and produce an output which is a member of some codomain. For example the <code>square</code> function is simply the function f: A → B, f(x) = x² where A and B are certain sets of numbers. Note that A and B are emphatically <em>not</em> equal to the set of real numbers since of course JavaScript cannot represent every possible real number (due to underlying hardware limitatations - computers can't possibly store arbitrarily large numbers).</p>
</blockquote>
<p>All of the above is not true for the <code>addImpure</code> function. This function can produce <em>different</em> outputs for identical inputs. This makes it hard very hard to troubleshoot if there is an error. After all you may not know what the (global) state of the program was when the error occured.</p>
<p>Closely related is another very nice property of pure functions - they are <em>easily testable</em>. There is no need to fake dependencies or global state - as the function only takes an input and produces some output. Therefore all you need to do is to call the function, pass some input and check whether the output matches the expected output. We will return to this <em>extensively</em> when we cover testing.</p>
<h3 id="immutability"><a class="header" href="#immutability">Immutability</a></h3>
<p>A variable is <strong>immutable</strong> if it is unchangeable. Otherwise we call it <strong>mutable</strong>. The more mutability we have inside our program the more can go wrong since it's hard to reason about (global) state.</p>
<p>This is where the alert reader might interject - after all, isn't the purpose of a program to do something? And how can we achieve that if we don't change state?</p>
<p>A fundamental correction is in order here - the purpose of every program is not <em>to do something</em>, but to <em>manipulate data</em>. You can of course manipulate data directly by mutating global state.</p>
<p>Consider the following <code>task</code> object:</p>
<pre><code class="language-javascript">const task = {
  id: 1,
  summary: 'Read the MERN book',
  description: 'Read and understand the MERN book.',
};
</code></pre>
<p>Now let's say we want to change the summary:</p>
<pre><code class="language-javascript">task.summary = 'MERN book';
</code></pre>
<p>This works for simple objects and changes. But this will quickly become brittle with growing complexity. <em>Reasoning about state and state changes is really hard.</em></p>
<p>Instead we can create copies of the objects which contain the changes we need:</p>
<pre><code class="language-javascript">const newTask = {
  ...task,
  summary: 'MERN book',
};
</code></pre>
<p>Note that we didn't change the original object, but created a copy of the object with a different summary.</p>
<p>Immutability and pure functions are closely linked. You want to have immutable datastructures which get passed through pure functions to compute results.</p>
<h3 id="higher-order-functions"><a class="header" href="#higher-order-functions">Higher-order functions</a></h3>
<p>We already talked about the fact that JavaScript functions are just objects. We even showed an example of how you can assign a function to a variable:</p>
<pre><code class="language-javascript">const square = (num) =&gt; num * num;
</code></pre>
<p>However we can do much more. Since functions are just objects we can pass them to other functions. For example let's define a function that repeats some action <code>n</code> times:</p>
<pre><code class="language-javascript">function repeat(fun, n) {
  for (let i = 0; i &lt; n; i++) {
    fun();
  }
}
</code></pre>
<p>We can use it like this:</p>
<pre><code class="language-javascript">const hello = () =&gt; console.log('Hello, world!');
repeat(hello, 4);
</code></pre>
<p>This will output:</p>
<pre><code>Hello, world!
Hello, world!
Hello, world!
Hello, world!
</code></pre>
<p>Note that the <code>repeat</code> function doesn't care what <code>fun</code> is - <code>fun</code> could be a simple <code>console.log</code> or a function which produces a simulated universe. All the <code>repeat</code> function does is it simply repeats <code>fun</code> the specified number of times.</p>
<p>Functions which take (or return) functions are called <strong>higher-order functions</strong>.</p>
<h3 id="the-trinity-of-map-reduce-and-filter"><a class="header" href="#the-trinity-of-map-reduce-and-filter">The trinity of map, reduce and filter</a></h3>
<p>We now introduce the three most important higher-order functions - <code>map</code>, <code>reduce</code> and <code>filter</code>. These functions allow you to perform an <em>incredibly</em> rich set of operations on arrays.</p>
<blockquote>
<p>We want to use this blockquote to emphasize <em>how often</em> you will be using <code>map</code>, <code>reduce</code> and <code>filter</code>.</p>
</blockquote>
<p>We will use two running examples throughout the section - an array of <code>numbers</code> and an array of <code>tasks</code>:</p>
<pre><code class="language-javascript">const numbers = [1, 2, 3, 4];
const tasks = [
  {
    id: 1,
    summary: 'Read the MERN book',
    description: 'Read and understand the MERN book.',
    timeLogged: 60,
    status: 'In progress',
  },
  {
    id: 2,
    summary: 'Write a task app',
    description: 'Write an awesome task app.',
    timeLogged: 0,
    status: 'Todo',
  },
  {
    id: 3,
    summary: 'Think of a funny joke',
    description: 'Come up with a funny joke to lighten the mood.',
    timeLogged: 120,
    status: 'In progress',
  },
];
</code></pre>
<p>The <code>map</code> function takes one argument - a function <code>f</code> to apply to every element of the array. It returns the array resulting from applying <code>f</code> to every element of the original array.</p>
<p>Let's say we wanted to square all the elements of <code>numbers</code>. We could write something like this:</p>
<pre><code class="language-javascript">const result = [];
for (const number in numbers) {
  result.push(number ** 2);
}
</code></pre>
<p>This is ugly and (you guessed it) <em>tedious</em>. Instead we can (and should) use the <code>map</code> function:</p>
<pre><code class="language-javascript">const result = numbers.map((number) =&gt; number ** 2);
</code></pre>
<p>The <code>result</code> array has the following content:</p>
<pre><code class="language-javascript">[1, 4, 9, 16];
</code></pre>
<p>Consider another example. Let's say we wanted to add a long description to all the <code>tasks</code> based on the summary and the description. We can use the <code>map</code> function again:</p>
<pre><code class="language-javascript">const longTasks = tasks.map((task) =&gt; ({
  ...task,
  longDescription: `${task.summary}: ${task.description}`,
}));
</code></pre>
<blockquote>
<p>You can see why the spread syntax is so handy. Thanks to this <em>incredible innovation</em>, you only need to explicitly specify the object parts where something interesting happens.</p>
</blockquote>
<p>The <code>longTasks</code> array will look like this:</p>
<pre><code class="language-javascript">[
  {
    id: 1,
    summary: 'Read the MERN book',
    description: 'Read and understand the MERN book.',
    timeLogged: 60,
    status: 'In progress',
    longDescription: 'Read the MERN book: Read and understand the MERN book.',
  },
  {
    id: 2,
    summary: 'Write a task app',
    description: 'Write an awesome task app.',
    timeLogged: 0,
    status: 'Todo',
    longDescription: 'Write a task app: Write an awesome task app.',
  },
  {
    id: 3,
    summary: 'Think of a funny joke',
    description: 'Come up with a funny joke to lighten the mood.',
    timeLogged: 120,
    status: 'In progress',
    longDescription: 'Think of a funny joke: Come up with a funny joke to lighten the mood.',
  },
];
</code></pre>
<p>The <code>filter</code> function allows you to select elements from an array based on some condition. It takes a function <code>f</code> which returns <code>true</code> or <code>false</code> for some input(s). All elements for which <code>f</code> returns <code>true</code> are kept, all elements for which <code>f</code> returns <code>false</code> are thrown away.</p>
<blockquote>
<p>A function which returns <code>true</code> or <code>false</code> is commonly referred to as a <em>predicate</em>.</p>
</blockquote>
<p>For example let's say we want to select all even elements from <code>numbers</code>. Here is the non-functional way:</p>
<pre><code class="language-javascript">const result = [];
for (const number in numbers) {
  if (number % 2 === 0) {
    result.push(number ** 2);
  }
}
</code></pre>
<p>Ugh! I don't even want to look at that. For loops and if statements all over the place. Let's rest our eyes and consider the <em>functional</em> approach:</p>
<pre><code class="language-javascript">const result = numbers.filter((number) =&gt; number % 2 === 0);
</code></pre>
<p>Consider another example - we might want to select all tasks from the <code>tasks</code> array which have the status 'Todo'. Think for a moment what the appropriate predicate would be.</p>
<p>That's right, it looks like this:</p>
<pre><code class="language-javascript">const todoTasks = tasks.filter((task) =&gt; task.status === 'Todo');
</code></pre>
<p>Finally there is the <code>reduce</code> function which (you guessed it) <em>reduces</em> an array to a single value. The <code>reduce</code> function moves over an array from left to right and keeps track of a <em>current value</em>. At every element of the array it recomputes the current value based on a function <code>f</code> (this is the first argument of the <code>reduce</code> function). The second argument of the reduce function is the initial value.</p>
<p>Here is how we might compute the sum of an array:</p>
<pre><code class="language-javascript">const sum = numbers.reduce((num, curr) =&gt; num + curr, 0);
</code></pre>
<p>Let's say we would like to compute the total logged time (i.e. the time logged for all the tasks combined). This would look like this:</p>
<pre><code class="language-javascript">const totalTime = tasks.reduce((task, curr) =&gt; task.loggedTime + curr, 0);
</code></pre>
<h3 id="summary-5"><a class="header" href="#summary-5">Summary</a></h3>
<p>You learned about important functional concepts like pure functions, immutability and higher-order functions. You also learned about the three most important higher-order functions - <code>map</code>, <code>filter</code> and <code>reduce</code>.</p>
<h3 id="further-reading-5"><a class="header" href="#further-reading-5">Further reading</a></h3>
<p>There is no further reading for this section.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-2-the-client"><a class="header" href="#chapter-2-the-client">Chapter 2: The client</a></h1>
<div style="text-align: right"> <i> This website needs to work on Internet Explorer 6.0 <br> - Famous last words </i> </div>
<p>In this chapter we will create a simple (website) client. This client will allow us to add and delete tasks. Each task will have a summary and a description.</p>
<p>Create a directory which will contain your project. We called that directory <em>easy-opus</em> (it is common to name your project directory after the project). Of course, feel free to give your directory any <em>meaningful</em> name.</p>
<p>Let's begin.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="html-and-the-dom"><a class="header" href="#html-and-the-dom">HTML and the DOM</a></h2>
<div style="text-align: right"> <i> Hey guys, how do I parse HTML with a regular expression? <br> - Famous last words </i> </div>
<h3 id="a-minimal-html-file"><a class="header" href="#a-minimal-html-file">A minimal HTML file</a></h3>
<p>Inside your project directory (<em>easy-opus</em> in our case) create a directory which will contain the (website) client. Give the directory a descriptive name (for example <em>client</em>). If you followed our naming scheme, your directory structure should now look as follows:</p>
<pre><code>easy-opus/
└─── client/
</code></pre>
<p>All further work will be done <em>inside the client directory</em>.</p>
<p>Let's write our first webpage. We will do so using <strong>HTML</strong> which is a <em>markup language</em> for defining documents that should be displayed in a browser.</p>
<blockquote>
<p>A markup language specifies rules which define what kind of information can be included in a document. Note that markup languages and programming languages are different things. A markup language essentially allows you to create documents to be displayed, while programming languages are much more powerful than that.</p>
</blockquote>
<p>Navigate to the client directory and create a file named <code>index.html</code> in there. Now write some minimal useful HTML to display a bunch of hardcoded tasks:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;title&gt;Easy Opus&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;app&quot;&gt;
      &lt;div&gt;
        &lt;h1&gt;My tasks&lt;/h1&gt;
        &lt;div id=&quot;taskList&quot;&gt;
          &lt;p&gt; Read the MERN book: Read and understand the MERN book. &lt;/p&gt;
          &lt;p&gt; Write a website: Create a new and cool website. &lt;/p&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>If you open the HTML file in your browser you should see something like this:</p>
<p><img src="chapter2/images/minimal.png" alt="" /></p>
<p>Hooray, you've created a simple HTML document! Now you can close this book and go procrastinate. No? Hm, that's weird. Oh I see, you've been forced you to read this book (blink <em>once</em> for help). In that case, we continue by trying to understand what we just wrote.</p>
<h3 id="html-elements"><a class="header" href="#html-elements">HTML elements</a></h3>
<p>HTML essentially consists of elements which you can use to declare what <em>kind</em> of content you would like to render. For example the <code>p</code> element is a paragraph:</p>
<pre><code class="language-html">&lt;p&gt;Read the MERN book: Read and understand the MERN book.&lt;/p&gt;
</code></pre>
<p>An HTML element usually has some <em>content</em> inside an <em>opening tag</em> and a <em>closing tag</em>. The opening tag is the name of the element wrapped in angle brackets (<code>&lt;p&gt;</code> in the above example). The closing tag is the name of the element wrapped in angle brackets with a <em>forward slash before the name</em> (<code>&lt;/p&gt;</code> in the above example).</p>
<p>There are many different HTML elements. For example <code>p</code> is a paragraph and <code>div</code> is a generic container. We will talk about other elements later on.</p>
<p>What makes HTML so powerful is the fact that <em>most</em> elements can be <em>nested</em>. For example here is how you can nest a paragraph inside a generic container:</p>
<pre><code class="language-html">&lt;div&gt;
  &lt;p&gt;Read the MERN book: Read and understand the MERN book.&lt;/p&gt;
&lt;/div&gt;
</code></pre>
<p>Elements can also have <em>attributes</em>. Two of the most important attributes are <code>id</code> and <code>class</code>. The <code>id</code> attribute is used to specify a <em>unique identity</em> for an HTML element. You can use that attribute to - well - uniquely identify an element. The <code>class</code> attribute is used to specify a <em>class</em> for an HTML element. Unlike unique identifiers, multiple HTML elements can have the same class. This is extremely useful for example if you want to <em>style</em> multiple HTML elements in the same way. For example you could color all HTML elements of class <code>blue-text</code> blue. There are many more attributes and different HTML elements often have different attributes.</p>
<p>If you look at <code>index.html</code> you will see the structure of an HTML document. An HTML document begins with <code>&lt;!DOCTYPE html&gt;</code> which is a <em>document type declaration</em>. This is followed by an <code>html</code> element which contains all the content of the document. The <code>head</code> element contains everything that is not directly related to the content that will be displayed on the page. In the above example we declared the title of the page (which will become the name of the tab once the page is opened) and what kind of character encoding we use. Finally the <code>body</code> element contains all the content that will actually be rendered on the page. In our example the task list we want to render is inside the <code>body</code> element.</p>
<blockquote>
<p>We will later talk about character encodings in great detail.</p>
</blockquote>
<h3 id="the-document-object-model"><a class="header" href="#the-document-object-model">The Document Object Model</a></h3>
<p>Once you open an HTML document in a browser, it is represented by the <strong>Document Object Model</strong> (DOM for short). Basically DOM is a model for documents which represent <em>editable logical trees</em>. This sounds <em>way</em> scarier than it really is. Let's explain this using an example. Looking at our HTML file, we have some HTML that looks like this:</p>
<pre><code class="language-html">&lt;div id=&quot;taskList&quot;&gt;
  &lt;p&gt; Read the MERN book: Read and understand the MERN book. &lt;/p&gt;
  &lt;p&gt; Write a website: Create a new and cool website. &lt;/p&gt;
&lt;/div&gt;
</code></pre>
<p>Here we have a <code>&lt;div&gt;</code> element (which is a generic container) and two <code>&lt;p&gt;</code> (paragraph) elements inside that div element. The <code>&lt;div&gt;</code> element is the <em>parent</em> of the <code>&lt;p&gt;</code> elements and the <code>&lt;p&gt;</code> elements are the <em>children</em> of the <code>&lt;div&gt;</code> element. The elements form a <em>tree</em>.</p>
<p>Consider this HTML:</p>
<pre><code class="language-html">&lt;div id=&quot;app&quot;&gt;
  &lt;h1&gt;My tasks&lt;/h1&gt;
  &lt;div id=&quot;taskList&quot;&gt;
    &lt;p&gt; Read the MERN book: Read and understand the MERN book. &lt;/p&gt;
    &lt;p&gt; Write a website: Create a new and cool website. &lt;/p&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<p>You can visualize it like this:</p>
<p><img src="chapter2/images/tree.png" alt="" /></p>
<p>Note that HTML and DOM are <em>absolutely not the same thing</em>. DOM is a <em>language-independent</em> model which represents document structure. HTML is a <em>concrete language</em> that lets you a certain kind of DOM in text.</p>
<h2 id="manipulating-the-dom-using-javascript"><a class="header" href="#manipulating-the-dom-using-javascript">Manipulating the DOM using JavaScript</a></h2>
<p>Whenever you write applications which have a lot of logic in the client, you will need to manipulate the DOM (i.e. add or remove items). For example, if we add a task, we might need to add some elements to the current tree representing the task. This is how the corresponding JavaScript™ code would look like:</p>
<pre><code class="language-javascript">const taskText = 'Do something else: Just do something already.';
const element = document.createElement('p');
element.append(taskText);
const taskList = document.getElementById('taskList');
taskList.appendChild(element);
</code></pre>
<p>This JavaScript™® code already looks cumbersome and annoying. It will only get more annoying once the logic becomes more complex. Manually manipulating the DOM in JavaScript™®℠ is generally a bad idea as it leads to unreadable and unmaintainable code. And unreadable code is almost as bad as inserting unnecessary trademark symbols into a text just for the heck of it. Your fellow developers will <em>really</em> hate you if you do that.</p>
<p>To make our lives simpler, we will use a UI library called <strong>React</strong>. The idea behind React is to create declarative UIs with nicely separated components. Basically we only define how the application should look like (hence the <em>declarative</em>) and React will figure out the rest (like which DOM manipulations are needed). This is pretty neat, as you will soon see for yourself.</p>
<h3 id="summary-6"><a class="header" href="#summary-6">Summary</a></h3>
<p>You know what HTML is and how HTML elements look like. You also know about the DOM and why you wouldn't want to manipulate it using JavaScript manually.</p>
<h3 id="further-reading-6"><a class="header" href="#further-reading-6">Further reading</a></h3>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Introduction_to_HTML/Getting_started">Introduction to HTML - Getting started with HTML</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="first-steps-in-react"><a class="header" href="#first-steps-in-react">First steps in React</a></h2>
<div style="text-align: right"> <i> The last thing the world needs is another JavaScript library. <br> - Ancient Chinese proverb </i> </div>
<h3 id="rendering-a-react-element"><a class="header" href="#rendering-a-react-element">Rendering a React element</a></h3>
<p>Let us import React using a <strong>content delivery network</strong> (CDN for short). Open <code>client/index.html</code> and insert the following <code>&lt;script&gt;</code> between the <code>&lt;head&gt;</code> tags:</p>
<pre><code class="language-html">&lt;head&gt;
  ...
  &lt;script src=&quot;https://unpkg.com/react@18/umd/react.development.js&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;https://unpkg.com/react-dom@18/umd/react-dom.development.js&quot;&gt;&lt;/script&gt;
&lt;/head&gt;
</code></pre>
<p>This instructs our browser to obtain and execute the respective JavaScript files enabling us to use React.</p>
<p>Now we remove the <code>&lt;h1&gt;</code> in the <code>&lt;div&gt;</code> element (since we are about to insert it dynamically). We also add a pair of <code>&lt;script&gt;</code> tags - all the JavaScript we are about to write will go between those <code>&lt;script&gt;</code> tags. The body now looks like this:</p>
<pre><code class="language-html">&lt;body&gt;
  &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
  &lt;script&gt;&lt;/script&gt;
&lt;/body&gt;
</code></pre>
<p>First we need create a React <strong>root</strong>. This the container in which we will render all our fancy UI elements. React DOM provides a <code>createRoot</code> function to accomplish that. The function takes a container, creates a React root for the container and returns the root:</p>
<pre><code class="language-javascript">const root = ReactDOM.createRoot(document.querySelector('#root'));
</code></pre>
<p>Next we want to actually create our React elements using the <code>React.createElement</code> function. A <strong>React element</strong> is essentially a building block describing some part of your UI. For example we could create a heading containing the text &quot;Tasks&quot; like this:</p>
<pre><code class="language-javascript">const element = React.createElement('h1', undefined, 'Tasks');
</code></pre>
<p>Let's have a look at the arguments here. The first argument is the <em>type</em> of the element. This can for example be the name of a regular HTML tag - however other types are possible and will in fact become very important soon. The second argument describes the <em>props</em> of the element. Here we could e.g. pass the ID of the element - if we need one. If we don't want to pass any props, we simply pass <code>undefined</code>. The third argument contains the <em>children</em> of the element. In this case we only have one child which is the text inside the heading.</p>
<blockquote>
<p>Note that quite often you will see people passing <code>null</code> as the second argument if no props are present. This goes back to our discussion regarding <code>null</code> and <code>undefined</code> - in this book we always use <code>undefined</code> to indicate value absence.</p>
</blockquote>
<p>Now that we have created a root and an element, we can render the element inside the root by using the conveniently named <code>render</code> function:</p>
<pre><code class="language-javascript">root.render(element);
</code></pre>
<p>This is how it all looks together (remember that this code should be between the <code>&lt;script&gt;</code> tags):</p>
<pre><code class="language-javascript">const element = React.createElement('h1', undefined, 'Tasks');
const root = ReactDOM.createRoot(document.querySelector('#root'));
root.render(element);
</code></pre>
<p>This is how the entire HTML file should look like:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;title&gt;Easy Opus&lt;/title&gt;
    &lt;script src=&quot;https://unpkg.com/react@18/umd/react.development.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;https://unpkg.com/react-dom@18/umd/react-dom.development.js&quot;&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;
    &lt;script&gt;
      const element = React.createElement('h1', undefined, 'Tasks');
      const root = ReactDOM.createRoot(document.querySelector('#root'));
      root.render(element);
    &lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Now open the HTML file in your browser. You should see a heading &quot;Tasks&quot;. Let us now inspect the resulting HTML using the browser inspector (press <kbd>F12</kbd> and open the tab labeled &quot;Inspector&quot; <em>or</em> &quot;Elements&quot;). This is how the HTML inside the body looks like:</p>
<pre><code class="language-html">&lt;div id=&quot;root&quot;&gt;
  &lt;h1&gt;Tasks&lt;/h1&gt;
&lt;/div&gt;
</code></pre>
<p>As you can see our element has been rendered inside the root. Great! Now you know how to manipulate the DOM with React. Go head and add React to your resume (unless of course you actually want to <em>learn</em> it which we <em>highly disapprove of</em>)!</p>
<h3 id="add-children-to-react-elements"><a class="header" href="#add-children-to-react-elements">Add children to React elements</a></h3>
<p>Let us now add some tasks and render them just like we did in the previous section. Every member of the list will in turn be a child of the list itself. This looks as following:</p>
<pre><code class="language-javascript">const task1 = React.createElement(
  'p',
  undefined,
  'Read the MERN book: Read and understand the MERN book.',
);
const task2 = React.createElement(
  'p',
  undefined,
  'Write a website: Create a new and cool website.',
);
const taskList = React.createElement('div', { id: 'taskList' }, task1, task2);
const heading = React.createElement('h1', undefined, 'Tasks');
const app = React.createElement('div', { id: 'app' }, heading, taskList);
const root = ReactDOM.createRoot(document.querySelector('#root'));
root.render(app);
</code></pre>
<p>Here we create two tasks (<code>task1</code> and <code>task2</code>). Then we create a <code>&lt;div&gt;</code> (<code>taskList</code>) containing those tasks. Then we create a heading element (<code>heading</code>). Finally we create a div containing the list of tasks and the heading (<code>app</code>) and render that element inside the root.</p>
<p>At this point you are probably asking yourself: <em>Didn't you just promise me that manipulating the DOM in React will be simple, you liars? This looks just like regular Javascript™®℠.</em> You have a point (the one after the trademark symbols) and we will indeed vastly simplify this code in the next section via black magic called <strong>JSX</strong>.</p>
<h3 id="summary-7"><a class="header" href="#summary-7">Summary</a></h3>
<p>Now you know how to import React using a CDN and how to dynamically manipulate the DOM using <code>React.createElement</code> and <code>ReactDOM.createRoot</code>. You also know you shouldn't actually do this.</p>
<h2 id="further-reading-7"><a class="header" href="#further-reading-7">Further reading</a></h2>
<p>There is no further reading for this section.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="introducing-jsx"><a class="header" href="#introducing-jsx">Introducing JSX</a></h2>
<div style="text-align: right"> <i> So, JSX is basically HTML... <br> - Famous last words </i> </div>
<h3 id="add-jsx"><a class="header" href="#add-jsx">Add JSX</a></h3>
<p>Instead of writing increasingly convoluted <code>React.createElement</code> calls until we lose the last scraps of our sanity, we would like to use syntax that looks like HTML. For example we would <em>really like</em> to be able to write stuff like this:</p>
<pre><code class="language-javascript">const element = &lt;li id=&quot;task1&quot;&gt;Task 1&lt;/li&gt;;
</code></pre>
<p>Unfortunately this is not possible as the above is not valid JavaScript (no trademarks this time, we promise). Feel free to try it out and add the above JavaScript to your <code>&lt;script&gt;</code> tags inside <code>client/index.html</code>. When you open the page you will see the following error in your console:</p>
<pre><code class="language-shell">Uncaught SyntaxError: expected expression, got '&lt;'
</code></pre>
<p><strong>Babel</strong> to the rescue! This tool allows us to <em>transpile</em> <strong>JSX</strong> (which looks like HTML) to JavaScript.</p>
<p>First we need to import Babel. We will use a CDN for now (like we did with React). Add this below the React script tags:</p>
<pre><code class="language-html">&lt;script src=&quot;https://unpkg.com/@babel/standalone/babel.js&quot;&gt;&lt;/script&gt;
</code></pre>
<p>Next set the <code>type</code> <em>attribute</em> of the <code>&lt;script&gt;</code> tag inside the body to &quot;text/babel&quot; and replace the calls to <code>React.createElement</code> with JSX:</p>
<pre><code class="language-html">&lt;script type=&quot;text/babel&quot;&gt;
  const task1 = &lt;p&gt;Task 1&lt;/p&gt;;
  const task2 = &lt;p&gt;Task 2&lt;/p&gt;;
  const taskList = &lt;div id=&quot;taskList&quot; children={[task1, task2]} /&gt;;
  const heading = &lt;h1&gt;Tasks&lt;/h1&gt;;
  const app = &lt;div id=&quot;app&quot; children={[heading, taskList]} /&gt;;
  const root = ReactDOM.createRoot(document.querySelector('#root'));
  root.render(app);
&lt;/script&gt;
</code></pre>
<p>Now open the <code>index.html</code> in your browser. Incredibly enough, it <em>just works</em>™.</p>
<p>But why does it work? Let us again open the browser inspector and look inside the head element of the document. We will see that Babel <em>sneakily</em> added another script tag below the title. If we take a look inside, we will see that this script tag just contains a bunch of <code>React.createElement</code> calls.</p>
<p>Babel <em>transpiled</em> our JSX into <code>React.createElement</code> calls. Sneaky indeed! But this is <em>the good kind of sneaky</em> as it allows us to write <em>more readable code</em>. And as we all know - writing readable code makes you both a better programmer and a better person.</p>
<h3 id="inline-jsx"><a class="header" href="#inline-jsx">Inline JSX</a></h3>
<p>The new code looks much better, but is still a bit ugly. Luckily, we can inline the JSX. This simply means that we can nest JSX elements inside each other (similar to HTML). This is how the new JavaScript inside our script tag looks like:</p>
<pre><code class="language-javascript">const app = (
  &lt;div id=&quot;app&quot;&gt;
    &lt;h1&gt;Tasks&lt;/h1&gt;
    &lt;div id=&quot;taskList&quot;&gt;
      &lt;p&gt;Task 1&lt;/p&gt;
      &lt;p&gt;Item 2&lt;/p&gt;
    &lt;/div&gt;
  &lt;/div&gt;
);
const root = ReactDOM.createRoot(document.querySelector('#root'));
root.render(app);
</code></pre>
<p>This looks pretty much exactly like regular HTML. However, it is important to remember that JSX is <em>emphatically not</em> HTML. Instead it is a <strong>syntax extension</strong> to JavaScript that can be transpiled to <em>normal</em> JavaScript. This will lead to a number of important consequences down the road (namely that JSX can express things HTML can not).</p>
<p>Right now you are probably wondering why we are bothering with React at all. We took perfectly fine HTML and for some reason insisted on doing a bunch of complex things just to get essentially the same HTML, but dynamically. However, this setup will now payoff in a <em>huge</em> way, as we introduce React components.</p>
<h3 id="summary-8"><a class="header" href="#summary-8">Summary</a></h3>
<p>You know how to dynamically manipulate the DOM using JSX and that you should write JSX instead of <code>React.createElement</code> calls.</p>
<h3 id="further-reading-8"><a class="header" href="#further-reading-8">Further reading</a></h3>
<ul>
<li><a href="https://reactjs.org/docs/introducing-jsx.html">React docs - Introducing JSX</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="react-components"><a class="header" href="#react-components">React components</a></h2>
<div style="text-align: right"> <i> Why do React components have great self-esteem? <br> Because they keep getting props. <br> - From "1000 programming dad-jokes" </i> </div>
<h3 id="create-your-first-react-component"><a class="header" href="#create-your-first-react-component">Create your first React component</a></h3>
<p>Conceptually, a component is an independent and reusable piece of the UI. By thinking about an HTML page in terms of isolated components you can easily create well-designed pages.</p>
<p>Consider the first version of the easy-opus app. We will need to display a bunch of tasks. Every task should be its own component containing the task summary, description and a button to delete the task. These tasks are grouped in a task list component. In addition to the tasks, the task list component has a button to add a new task.</p>
<p>This is how it would look like in an image:</p>
<p><img src="chapter2/images/components.png" alt="" /></p>
<p>In terms of implementation, a component is just a JavaScript function that takes the data it should render as input and returns the UI representation of the data as output. It will probably not come as a surprise to you at this point that the returned UI representation is given by JSX.</p>
<blockquote>
<p>Do note that all the code we are about to write goes between the <code>&lt;script&gt;</code> tags. We will fix this in the next section.</p>
</blockquote>
<p>Let us move the task list into its own component:</p>
<pre><code class="language-javascript">const TaskList = () =&gt; {
  return (
    &lt;div id=&quot;taskList&quot;&gt;
      &lt;p&gt;Read the MERN book: Read and understand the MERN book.&lt;/p&gt;
      &lt;p&gt;Write a website: Create a new and cool website.&lt;/p&gt;
    &lt;/div&gt;
  );
};
</code></pre>
<p>Hooray! You created your first React component. Ok, now you can <em>definitely</em> add React to your resume. No? Well, apparently you are really one of those weird people who actually learn things before putting them on their resume...</p>
<p>We could now call the TaskList component the same way we would call a regular JavaScript function. We could also wrap it in a <code>React.createElement</code> call. However thanks to the power of JSX we can just do this:</p>
<pre><code class="language-javascript">const app = (
  &lt;div id=&quot;app&quot;&gt;
    &lt;h1&gt;Tasks&lt;/h1&gt;
    &lt;TaskList /&gt;
  &lt;/div&gt;
);
</code></pre>
<p>This looks just as if <code>&lt;TaskList&gt;</code> is a regular HTML tag! This means that we can use and nest our own components exactly like we would use and nest HTML elements. This leads to very simple code that is describing our UI in a very concise and straightforward manner.</p>
<p>This is why you should not confuse HTML and JSX. It's much more complicated (and relatively rare) to add your own custom tags in HTML. In comparison - creating custom components in JSX is easy and you will do so often. Isn't that great? Hint: <em>It totally is</em>.</p>
<h3 id="add-props-to-a-react-component"><a class="header" href="#add-props-to-a-react-component">Add props to a React component</a></h3>
<p>JSX is great, but the above code snippet is not. The main problem is that the data it represents is hardcoded into the component.</p>
<p>Let us fix that by passing properties (<code>props</code>) into the component. This is simply a JavaScript object containing the data the component should render. In our case we will simply pass an array of strings named <code>tasks</code> containing our - well - tasks. We can then use <code>map</code> to create a list of p elements from that array:</p>
<pre><code class="language-javascript">const TaskList = (props) =&gt; {
  return (
    &lt;div id=&quot;taskList&quot;&gt;
      {props.tasks.map((task) =&gt; (
        &lt;p id={task.id}&gt;{`${task.summary}: ${task.description}`}&lt;/p&gt;
      ))}
    &lt;/div&gt;
  );
};
</code></pre>
<p>This is already not too bad, but of course we want to take advantage of the latest and greatest JavaScript syntax there is. Writing <code>props.tasks</code> or <code>task.summary</code> is annoying. This will become even more annoying when we have a lot of props. We can use object destructuring to alleviate this:</p>
<pre><code class="language-javascript">const TaskList = ({ tasks }) =&gt; {
  return (
    &lt;div id=&quot;taskList&quot;&gt;
      {tasks.map(({ id, summary, description }) =&gt; (
        &lt;p&gt;{`${summary}: ${description}`}&lt;/p&gt;
      ))}
    &lt;/div&gt;
  );
};
</code></pre>
<blockquote>
<p>You can hopefully see how the concepts from chapter 1 all come together quite nicely.</p>
</blockquote>
<p>Excellent! We can use the new component like this:</p>
<pre><code class="language-javascript">const tasks = [
  {
    id: 'TSK-1',
    summary: 'Read the MERN book',
    description: 'Read and understand the MERN book.',
  },
  {
    id: 'TSK-2',
    summary: 'Write a website',
    description: 'Create a new and cool website.',
  },
];

const app = (
  &lt;div id=&quot;app&quot;&gt;
    &lt;h1&gt;TODOs&lt;/h1&gt;
    &lt;TaskList tasks={tasks} /&gt;
  &lt;/div&gt;
);
</code></pre>
<p>While we're at it, let's also make our app an actual component.</p>
<pre><code class="language-javascript">const App = () =&gt; {
  return (
    &lt;div id=&quot;app&quot;&gt;
      &lt;h1 id=&quot;headline&quot;&gt;Tasks&lt;/h1&gt;
      &lt;TaskList tasks={tasks} /&gt;
    &lt;/div&gt;
  );
};

root.render(&lt;App /&gt;);
</code></pre>
<p>Quite nice. Note that there is a problem with the current implementation of our component. You can see this by opening your browser console. An error &quot;Warning: Each child in a list should have a unique &quot;key&quot; prop.&quot; will appear.</p>
<p>The reason for that is that React needs a way to identify which items in a list have changed or have been added or removed. It does that by looking at the keys of the items. These basically give the elements a stable identity.</p>
<p>Simply add a key to every <code>&lt;p&gt;</code> in the task list:</p>
<pre><code class="language-javascript">const TaskList = ({ tasks }) =&gt; {
  return (
    &lt;div id=&quot;taskList&quot;&gt;
      {tasks.map(({ id, summary, description }) =&gt; (
        &lt;p key={id}&gt;{`${summary}: ${description}`}&lt;/p&gt;
      ))}
    &lt;/div&gt;
  );
};
</code></pre>
<h2 id="summary-9"><a class="header" href="#summary-9">Summary</a></h2>
<p>You learned how to create React components and how to pass properties to components.</p>
<h2 id="further-reading-9"><a class="header" href="#further-reading-9">Further reading</a></h2>
<ul>
<li><a href="https://reactjs.org/docs/components-and-props.html">React docs - Components and props</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h2 id="project-structure"><a class="header" href="#project-structure">Project structure</a></h2>
<h3 id="splitting-files"><a class="header" href="#splitting-files">Splitting files</a></h3>
<p>All this time we were working inside a single index.html. This is bad for three main reasons:</p>
<ol>
<li>We want to split the HTML and JavaScript (and later the CSS) into separate files. This will improve the maintainability of the project.</li>
<li>We want to split the JavaScript files as well. For example it is very common to have a component per JavaScript file.</li>
<li>We want to avoid loading the scripts from a CDN and performing the Babel transpilation at run time. Instead we want to put everything into a <em>bundle</em> and then simply use that bundle.</li>
</ol>
<p>In order to be able to do all of this we need a <em>build toolchain</em>. Let us begin the setup of the toolchain by creating a directory public/ and moving the index.html file into public/. You can do this using your file explorer or using the command line:</p>
<pre><code class="language-shell">mkdir public
mv index.html public/
</code></pre>
<p>The public/ directory will mostly just contain your index.html file and things like the favicon. We now create a src/ directory.</p>
<pre><code>mkdir src
</code></pre>
<p>This is where all the JavaScript <em>source</em> files (i.e. the files you use for development) will live.</p>
<p>Next we move the Javascript from <code>public/index.html</code> into <code>src/index.js</code>.</p>
<p>The <code>public/index.html</code> should therefore now look like this:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;title&gt;Easy Opus&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;root&quot;&gt; &lt;/div&gt;
    &lt;script src=&quot;../dist/bundle.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Note that we include a file called <code>dist/bundle.js</code> and not <code>src/index.js</code>. We will return to this in a second.</p>
<p>The <code>src/index.js</code> file should look like this:</p>
<pre><code class="language-javascript">const TaskList = ({ tasks }) =&gt; {
  return (
    &lt;div id=&quot;taskList&quot;&gt;
      {tasks.map(({ summary, description }) =&gt; (
        &lt;p&gt;{`${summary}: ${description}`}&lt;/p&gt;
      ))}
    &lt;/div&gt;
  );
};

const tasks = [
  {
    summary: 'Read the MERN book',
    description: 'Read and understand the MERN book.',
  },
  {
    summary: 'Write a website',
    description: 'Create a new and cool website.',
  },
];

const app = (
  &lt;div id=&quot;app&quot;&gt;
    &lt;h1&gt;Tasks&lt;/h1&gt;
    &lt;TaskList tasks={tasks} /&gt;
  &lt;/div&gt;
);
const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(app);
</code></pre>
<p>Your folder structure should look as follows:</p>
<pre><code>easy-opus/
└── client/
    ├── public/
    │   └── index.html
    └── src/
        └── index.js
</code></pre>
<h3 id="initialize-a-nodejs-project"><a class="header" href="#initialize-a-nodejs-project">Initialize a node.js project</a></h3>
<p>In chapter 1 we always worked with either individual code snippets or JavaScript files. However now we want to create a Node.js project.</p>
<p>Initialize a Node.js project by running:</p>
<pre><code class="language-shell">npm init -y
</code></pre>
<p>We pass the -y flag to avoid all kinds of annoying questions about things we currently don't care about.</p>
<p>If you inspect your root directory you will now see a package.json which looks approximately like this:</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;client&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;keywords&quot;: [],
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;
}
</code></pre>
<p>We already met babel. Instead of serving it from a CDN we now install it as a development dependency. In addition we install the react-preset to allow the transpilation of JSX:</p>
<pre><code class="language-shell">npm install --save-dev @babel/cli @babel/core @babel/preset-react babel-loader
</code></pre>
<p>Next we install webpack and the webpack development server as a dev dependency:</p>
<pre><code class="language-shell">npm install --save-dev webpack webpack-cli webpack-dev-server
</code></pre>
<p>If you look inside the project you will see that there are two new things. The first thing is a directory called node<em>modules. This contains the newly installed dependencies. The second thing is a file called package-lock.json which contains all the dependencies (include the dependencies of the dependencies) with their exact version. This file allows other developers to reconstruct your _exact dependencies</em> - especially in large projects this can become extremely important. Hunting down errors that stem from dependendency problems is some of the worst pastime you can think of in software development.</p>
<blockquote>
<p>As a side note, the node<em>modules directory already contains approximately 45MB. Nothing to see here... This is an unfortunate artifact of JavaScript developers generally using _a lot</em> of dependencies (not all of which are always necessary).</p>
</blockquote>
<p>Next we create the webpack configuration in a file called <em>webpack.config.js</em>:</p>
<pre><code class="language-javascript">const path = require('path');

module.exports = {
  entry: './src/index.js',
  output: {
    path: path.join(__dirname, 'dist'),
    filename: 'bundle.js',
    publicPath: '/dist/',
  },
  mode: 'development',
  module: {
    rules: [
      {
        test: /\.js$/,
        exclude: /node_modules/,
        use: [
          {
            loader: 'babel-loader',
            options: {
              presets: ['@babel/preset-react'],
            },
          },
        ],
      },
    ],
  },
};
</code></pre>
<p>Now we can build the project:</p>
<pre><code class="language-shell">npx webpack build
</code></pre>
<p>This builds the project into <code>dist/bundle.js</code>. Remember that this is the file we are including in our <code>index.html</code>. Your project structure should look like this:</p>
<pre><code>todo-app
├── node_modules
├── dist
│   └── bundle.js
├── public
│   └── index.html
├── src
│   └── index.js
├── package.json
├── package-lock.json
└── webpack.config.js
</code></pre>
<p>Open <code>index.html</code> in your browser and you will see a list of tasks.</p>
<h3 id="add-npm-scripts"><a class="header" href="#add-npm-scripts">Add npm scripts</a></h3>
<p>Instead of running command like <code>npx webpack serve</code> all the time, we can tell npm to map commands:</p>
<pre><code class="language-shell">&quot;scripts&quot;: {
  &quot;build&quot;: &quot;webpack build&quot;,
  &quot;serve&quot;: &quot;webpack serve&quot;
}
</code></pre>
<p>Now instead of executing <code>npx webpack build</code> and <code>npx webpack serve</code> we simply do <code>npm run build</code> and <code>npm run serve</code> respectively. This will become especially important when we will migrate from webpack to other bundlers since we can then simply edit the package.json and the commands will not change.</p>
<p>Let us now further improve the project structure.</p>
<h3 id="splitting-the-javascript"><a class="header" href="#splitting-the-javascript">Splitting the JavaScript</a></h3>
<p>Instead of having a single JavaScript file for the entire application, we want to split the JavaScript code as well. It is common practice to put every JavaScript component into its own file.</p>
<p>We now move Task into a separate component and put that component into a file called <em>src/task.js</em>:</p>
<pre><code class="language-javascript">const Task = ({ summary, description }) =&gt; {
  return &lt;p&gt;{`${summary}: ${description}`}&lt;/p&gt;;
};

export default Task;
</code></pre>
<p>This looks like overkill at first glance. However the tasks will inevitably become more complicated (this is a task management application after all). It is therefore already clear that the task should be its own component. Don't just blindly implement the current requirements, think about probable scenarios for the future and what they mean for your code.</p>
<p>Next we move the TaskList component to src/task-list.js:</p>
<pre><code class="language-javascript">const TaskList = ({ tasks }) =&gt; {
  return (
    &lt;div id=&quot;taskList&quot;&gt;
      {tasks.map(({ summary, description }) =&gt; (
        &lt;Task summary={summary} description={description} /&gt;
      ))}
    &lt;/div&gt;
  );
};

export default TaskList;
</code></pre>
<p>By now you know the drill. The App component goes into src/app.js:</p>
<pre><code class="language-javascript">const App = () =&gt; {
  const tasks = [
    {
      summary: 'Item 1',
      description: 'Description of item 1',
    },
    {
      summary: 'Item 2',
      description: 'Description of item 2',
    },
  ];

  return (
    &lt;div id=&quot;app&quot;&gt;
      &lt;h1&gt;Tasks&lt;/h1&gt;
      &lt;TaskList tasks={tasks} /&gt;
    &lt;/div&gt;
  );
};

export default App;
</code></pre>
<p>Finally our src/index.js becomes really simple:</p>
<pre><code class="language-javascript">import App from './app';

root.render(&lt;App /&gt;);
</code></pre>
<h3 id="install-react-as-a-dependency-instead-of-serving-from-cdn"><a class="header" href="#install-react-as-a-dependency-instead-of-serving-from-cdn">Install React as a dependency instead of serving from CDN</a></h3>
<p>We no longer want to serve React from CDN, but install it as a dependency instead.</p>
<p>Run:</p>
<pre><code class="language-shell">npm install react react-dom
</code></pre>
<p>We also need to change the webconfig:</p>
<pre><code class="language-javascript">options: {
  presets: [
    [
      &quot;@babel/preset-react&quot;,
      {
        runtime: &quot;automatic&quot;,
      },
    ],
  ],
}
</code></pre>
<p>We now need to import ReactDOM at the top of src/index.js:</p>
<pre><code class="language-javascript">import ReactDOM from 'react-dom/client';
</code></pre>
<p>Run the webpack build again (<code>npx webpack build</code>) and open <code>index.html</code> in a browser. You will again see the same task list. Note that not much has changed in terms of <em>features</em>, however the structure of our project is now <em>much</em> cleaner. We will make some minor improvements later on (like using a <em>development server</em>), however all in all this is the project structure we will stick to for now.</p>
<h3 id="summary-10"><a class="header" href="#summary-10">Summary</a></h3>
<p>You learned about webpack and how to structure a JavaScript project.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="react-state"><a class="header" href="#react-state">React State</a></h2>
<h3 id="forms"><a class="header" href="#forms">Forms</a></h3>
<p>Let us now add the form for creating a new task. Before you continue reading, here is a mental exercise - <em>which component should contain this form</em>?</p>
<p>If you thought &quot;obviously, it's the TaskList component&quot;, you are right! Let's enter src/task-list.js and import React at the top:</p>
<pre><code class="language-javascript">import * as React from 'react';
</code></pre>
<p>Next we add the form inside the div (below all the p elements representing the tasks):</p>
<pre><code class="language-html">&lt;form onSubmit=&quot;{handleSubmit}&quot;&gt;
  &lt;label htmlFor=&quot;summary&quot;&gt;Summary:&lt;/label&gt;
  &lt;input type=&quot;text&quot; id=&quot;summary&quot; /&gt;
  &lt;br /&gt;
  &lt;label htmlFor=&quot;description&quot;&gt;Description:&lt;/label&gt;
  &lt;textarea id=&quot;description&quot; /&gt;
  &lt;br /&gt;
  &lt;button type=&quot;submit&quot;&gt;Add task&lt;/button&gt;
&lt;/form&gt;
</code></pre>
<p>This form contains the summary, the description and the &quot;Add task&quot; button. Try clicking the button - it won't do much. The reason for that is that we haven't yet told the button what to do on submit. Let's change that now.</p>
<p>We create a handleSubmit function, which simply logs something to the console. Note that the default behaviour of a form submission includes a browser refresh, which we don't want. To prevent the default behaviour, we have to call (surprise) the preventDefault function of the event:</p>
<pre><code class="language-javascript">function handleSubmit(event) {
  event.preventDefault();
  console.log('Submit');
}
</code></pre>
<p>Next we make sure that the onSubmit function is called when the button is clicked. To accomplish that, we set the onSubmit property of the button to the <code>handleSubmit</code> function:</p>
<pre><code class="language-html">&lt;button type=&quot;submit&quot; onSubmit=&quot;{handleSubmit}&quot;&gt;Add task&lt;/button&gt;
</code></pre>
<p>If you click the button, you should now see &quot;Submit&quot; logged to the console.</p>
<h3 id="use-react-state-to-create-new-items"><a class="header" href="#use-react-state-to-create-new-items">Use React state to create new items</a></h3>
<p>Now that we can add new tasks, our components needs to track <strong>state</strong> (the list of tasks in this case). React has the useState hook for this purpose. A <strong>hook</strong> is nothing more than a (special) function. This particular hook is a function that allows you to add state to a component:</p>
<pre><code class="language-javascript">const [tasks, setTasks] = React.useState([]);
</code></pre>
<p>The <code>useState</code> hook declares a &quot;state variable&quot;. The argument to the hook is the initial state. In this case, we begin with an empty list, since we have no tasks in the beginning. The hook returns a pair of values. The first element is the current state and the second element is a function for updating state. <em>You should never set the first element directly and only use the updating function. Otherwise React will get confused since it won't realize that your state has changed and will not update the DOM correctly.</em></p>
<p>The updater function takes the previous state and returns the next state. Here we take the list of previous tasks (i.e. the tasks that were present before the button click) and return the new tasks (i.e. the tasks that should be present after the button click). In this case we simply add the task to the end:</p>
<pre><code class="language-javascript">function handleSubmit(event) {
  event.preventDefault();
  const [{ value: summary }, { value: description }] = event.target.elements;
  setTasks((previousTasks) =&gt; [
    ...previousTasks,
    {
      summary,
      description,
    },
  ]);
}
</code></pre>
<p>Try clicking the button - a new task should appear.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="chapter-3-the-server"><a class="header" href="#chapter-3-the-server">Chapter 3: The server</a></h1>
<p>In this chapter we will create a simple server.</p>
<div style="break-before: page; page-break-before: always;"></div><h2 id="an-http-primer"><a class="header" href="#an-http-primer">An HTTP primer</a></h2>
<h3 id="http-and-express"><a class="header" href="#http-and-express">HTTP and Express</a></h3>
<p>When writing a web application, the most common way to get data from a server to a client is via the HTTP procotol (usually augmented by SSL resulting in the HTTPS procotol).
HTTP is a <strong>request/response protocol</strong>, i.e. HTTP clients send requests to an HTTP server and receive a response in return.
You have in fact already used the HTTP protocol.
Every time you browse the internet, HTTP requests are sent under the hood.</p>
<p>We could use the built-in HTTP module of Node.js, but this is not terribly convenient.
Instead we will use an extremely popular framework called <strong>Express</strong>.
While Express builts on top of the HTTP module, it provides a lot of additional useful functionality.</p>
<p>Inside our root directory (<em>easy-opus</em> in our case) create a directory named <em>api</em>.
As usual this name can be something else, but it should be descriptive.
Navigate inside the <em>api</em> directory and create a new Node.js project:</p>
<pre><code class="language-shell">npm init -y
</code></pre>
<p>Install Express:</p>
<pre><code class="language-shell">npm install express
</code></pre>
<p>Now create a file named app.js inside the api directory.
As usual the name of the file is up to you, but it should be something meaningful.
Inside the file we will create an Express application and then make that application listen for connections on a specified host and port.</p>
<p>If you are very new to computer networks, a host is simply a device connected to some (computer) network.
A port is a communication endpoint on that host.
The concept of ports allows you to run multiple network applications on the same device.
For example, your awesome website might run on port 80 and a service allowing you to remotely login onto your machine might run on port 22.</p>
<p>This is how you can create an Express application and make it listen on port 3000:</p>
<pre><code class="language-javascript">const express = require('express');
const app = express();
const PORT = 3000;

app.listen(PORT, () =&gt; {
  console.log(`Server listening on port ${PORT}...`);
});
</code></pre>
<p>This application is not very useful, so let's add a <strong>route</strong> to it.
Add this above the call to <code>listen</code>:</p>
<pre><code class="language-javascript">app.get('/', (req, res) =&gt; {
  res.send('Hello, world!');
});
</code></pre>
<p>If you open a browser and navigate to (http://localhost:3000) you will see</p>
<pre><code>Hello, world!
</code></pre>
<p>You can also use cURL, which includes a command-line tool for transferring data on a network.
Among other things it supports HTTP and is available on both Windows and most Linux distributions.
Open a command line and run:</p>
<pre><code class="language-shell">curl http://localhost:3000/
</code></pre>
<p>The will output the following:</p>
<pre><code>Hello, world!
</code></pre>
<h3 id="http-urls"><a class="header" href="#http-urls">HTTP URLs</a></h3>
<p>The string <code>http://localhost:3000/</code> is a so called URL.
You have probably seen URLs before.
Navigate to Google and search for &quot;MERN stack&quot; - you will notice that the URL in your browser looks like this:</p>
<pre><code>https://www.google.com/search?q=mern+stack
</code></pre>
<p>For didactic reasons we will include the port:</p>
<pre><code>https://www.google.com:443/search?q=mern+stack
</code></pre>
<p>Generally speaking, a typical HTTP URL has the following form:</p>
<pre><code>scheme://host:port/path?key1=value1&amp;key2=value2#fragment
</code></pre>
<blockquote>
<p>Note the word <em>typical</em> here.
HTTP URLs (and especially more general URLs) can become <em>much more</em> complicated, but we will not cover all the little details in this book.
In fact the complexity of URLs is often a source of subtle bugs and browser crashes.
For example - at some point Android Chrome would <a href="https://news.ycombinator.com/item?id=28639708">crash</a> when trying to open <code>http://../foo</code>.</p>
</blockquote>
<p>The <strong>scheme</strong> usually indicates the protocol which describes how information should be transmitted.
We will almost exclusively use HTTP or HTTPS (which is just secure HTTP) in this book.
Therefore the scheme will almost always either be http or https.
In the above Google URL the scheme is clearly https.</p>
<p>You already learned about the <strong>host</strong> and the <strong>port</strong> - the host identifies the device you wish to connect to and the port is the communication endpoint on that device.
Note that the host could be a domain name (like www.google.com) or an IP address (like 142.251.36.238).
Usually we will work with domain names since they are stable (unlike a lot of IP addresses).
Together the host and the port make up the <strong>authority</strong>.</p>
<blockquote>
<p>At the time of this writing 142.251.36.238 is one of Google's IP addresses.
This may of course change by the time you are reading this book.</p>
</blockquote>
<p>The next part is the <strong>path</strong>.
Assuming it is not empty, the path begins with a forward slash (&quot;/&quot;) and uniquely identifies the resource we want to query.
In the Google URL the path is &quot;/search&quot;.
Often paths will be hierarchical.
In this case the different components of the hierarchy are generally separated by slashes - for example &quot;/path/to/resource&quot;.</p>
<p>The path can be followed by a <strong>query</strong>.
The query begins with a question mark and is followed by key-value pairs.
In the Google URL this is &quot;?q=mern+stack&quot;.
Here the query provides information about your search.
If there are multiple key-value pairs, they are separated by ampersands (&quot;&amp;&quot;).
For example the query could be &quot;?key1=value1&amp;key2=value2&quot;.</p>
<p>The query can be followed by a <strong>fragment</strong>.
This is used for navigation by the client and is not sent to server.</p>
<h3 id="get-and-post-requests"><a class="header" href="#get-and-post-requests">GET and POST requests</a></h3>
<p>HTTP knows multiple <strong>request methods</strong>.
We primarily care about two request methods for now - namely <strong>GET</strong> and <strong>POST</strong>.
GET requests are generally used to retrieve data.</p>
<p>Recall out route from above:</p>
<pre><code class="language-javascript">app.get('/', (req, res) =&gt; {
  res.send('Hello world!');
});
</code></pre>
<p>This indicates that if a GET request is sent to path '/', we would like to return 'Hello, world!' to the client.
The <code>req</code> is the <strong>request object</strong> and <code>res</code> is the <strong>respose object</strong>.
If we want to send a HTTP response to the client we therefore use <code>res.send</code>.</p>
<p>POST requests are generally used to send information to the server.
For example a login request will generally be a POST request since it tells the server that a user has logged in to the application.
Here we are less interested in the data the server returns us and more in telling the server that something happened.</p>
<p>Note that we need to enable some middleware (we will return to the concept of middleware in a second):</p>
<pre><code class="language-javascript">app.use(express.text());
</code></pre>
<p>Consider the following route which simply returns the request body back to the client:</p>
<pre><code class="language-javascript">app.post('/post-example', (req, res) =&gt; {
  res.send(req.body);
});
</code></pre>
<p>How do we test this?
You cannot simply send a POST request in a browser the way you would send a GET request.
This is where curl comes in really handy.
We need to specify that we want to send a POST request using the <code>-X</code> flag.
In addition we specify the data that we want to send in the <em>body</em> of the POST request using the <code>-d</code> flag.
Finally we specify a header called <code>Content-Type</code> and set it to <code>text/plain</code>.
This indicates that the data we want to send is plain text.</p>
<p>The final command looks like this:</p>
<pre><code>curl -X POST -H &quot;Content-Type: text/plain&quot; -d 'haha' http://localhost:3000/post-example
</code></pre>
<p>Generally speaking GET requests transmit information using the querystring, while POST requests transmit information in the request body.</p>
<p>Note that we will rarely send plain text in the request.
Instead we will use a special format called JSON.
This is a file format that supports a bunch of primitive values, arrays and dictionaries.
A typical JSON could look like this:</p>
<pre><code class="language-json">{
  &quot;tasks&quot;: [&quot;Task 1&quot;, &quot;Task 2&quot;, &quot;Task 3&quot;],
  &quot;date&quot;: {
    &quot;year&quot;: 2022,
    &quot;month&quot;: 06,
    &quot;date&quot;: 18
  }
}
</code></pre>
<p>In order to accept JSON requests, we need to replace the <code>express.text</code> middleware with the <code>express.json</code> middleware:</p>
<pre><code class="language-json">app.use(express.json());
</code></pre>
<p>Now we can curl the same path like this:</p>
<pre><code>curl -X POST -H &quot;Content-Type: application/json&quot; -d '{ &quot;key&quot;: &quot;value&quot; }' http://localhost:3000/post-example
</code></pre>
<p>Note that here we specify the <code>application/json</code> content type.</p>
<blockquote>
<p>This is all fine and dandy, but how do client and server know how to interpret all these things?
The answer to that question is the IETF (short for Internet Engineering Task Force).
This is an organization that sets standards for the Internet (hence the name).
Among other things it is responsible for creating the various RFCs (Request for Comments) that outline the workings of HTTP.
For example HTTP 1.1 (which is the most common HTTP version you will encounter at the time of this writing) is outlined in RFCs 7230-7235.
URIs on the other hand are outlined in RFC 3986.
We encourage you to have a quick look at the respective RFCs.
You should <em>definitely not</em> read them all at this stage, but just understand the sheer complexity of the things we are discussing here.
We are really just scratching a very tiny part of the surface of it all.
Lucky for you, most of the RFCs will probably not be terribly relevant in your day-to-day life.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="writing-the-api"><a class="header" href="#writing-the-api">Writing the API</a></h1>
<h2 id="our-tasks"><a class="header" href="#our-tasks">Our tasks</a></h2>
<p>For now we will store our tasks in a variable named <code>tasks</code>.
Note that this is something we don't want to do in the final version of our application.
The reason for that is pretty obvious - every time we stop our server, we will lose the contents of the <code>tasks</code> variable.
We will learn how to persistently save the tasks to a database in the next chapter.
But for now let us just focus on building a web API using Express.</p>
<p>Let us create the <code>tasks</code> variable together with a bunch of tasks.
We simply use a dictionary, where all keys are unique task IDs and the values are the task objects.
Every task object will have the <code>summary</code> and <code>description</code> fields.
These should be fairly self-explanatory.
Here is how our first version of <code>app.js</code> looks like:</p>
<pre><code class="language-javascript">const express = require('express');
const app = express();
const PORT = 3000;

const tasks = {
  '00b2a368-5269-4cee-9cdc-efab98f8b54a': {
    summary: 'Read the MERN book',
    description: 'Read and understand the MERN book.',
  },
  'd7b74e8f-34bc-4c11-9260-9369102c53f6': {
    summary: 'Write a task app',
    description: 'Write an awesome task app.',
  },
};

app.listen(PORT, () =&gt; {
  console.log(`Server listening on port ${PORT}...`);
});
</code></pre>
<p>Note that there are currently no routes present - we will add them in a second.</p>
<h2 id="an-intermezzo-regarding-uuids"><a class="header" href="#an-intermezzo-regarding-uuids">An intermezzo regarding UUIDs</a></h2>
<p>The task IDs we use here are so called UUIDs - short for <strong>universally unique identifiers</strong>.
Such an ID can be easily generated randomly and is, for all practical purposes, unique.
This means that if you generate a UUID for your application, it has never been generated before - therefore UUIDs are a good way of, well, uniquely identifying a resource.
There are multiple variants of UUIDs - here we use UUIDv4, which is just a special way of creating UUIDs.</p>
<p>When we create a new task later on, we will need to automatically generate new UUIDs.
For that we can use the <code>uuid</code> package.
Install it by running:</p>
<pre><code class="language-javascript">npm install uuid
</code></pre>
<p>Now we can generate UUIDs as follows:</p>
<pre><code class="language-javascript">const { v4: uuidv4 } = require('uuid');
const generatedId = uuidv4();
console.log(generatedId);
</code></pre>
<p>This will print a UUID.
In fact this is how the IDs of the two tasks in the <code>tasks</code> variable were generated.</p>
<p>There are many other versions of unique IDs, some of which we will return to later.</p>
<h2 id="rest-and-crud"><a class="header" href="#rest-and-crud">REST and CRUD</a></h2>
<p>There are two words you will hear very often when people talk about web APIs and the like - REST and CRUD.</p>
<p><strong>REST</strong> is short for &quot;Representational State Transfer&quot; and outlines guidelines for managing communications between clients and servers.
If you read about REST online, there will be a lot of verbose language like &quot;layered system architecture&quot; or &quot;code on demand&quot;.
However, at its core a REST API is about writing requests that ask for resources using some kind of uniform resource identifier (like UUIDs) and receiving a representation of those resources.
For example, a client might ask for the task with the UUID <code>d7b74e8f-34bc-4c11-9260-9369102c53f6</code> and receive a representation of the respective task which might look as follows:</p>
<pre><code class="language-json">{
  &quot;summary&quot;: &quot;Write a task app&quot;,
  &quot;description&quot;: &quot;Write an awesome task app.&quot;
}
</code></pre>
<p><strong>CRUD</strong> stands for &quot;Create, Read, Update, Delete&quot; and describes the four basic operations most simple web APIs will support.
For example, we might want to:</p>
<ul>
<li>create a new task</li>
<li>read the contents of a task (by its UUID)</li>
<li>update a task (e.g. with a new summary or description)</li>
<li>delete a task</li>
</ul>
<p>CRUD maps very nicely to HTTP, because you can use</p>
<ul>
<li>POST requests for creating</li>
<li>GET requests for reading</li>
<li>PUT requests for updating (although POST is commonly used as well for this purpose)</li>
<li>DELETE requests for deleting</li>
</ul>
<p>Together REST and CRUD will guide the design of our web API.</p>
<h2 id="get-routes-to-obtain-the-tasks"><a class="header" href="#get-routes-to-obtain-the-tasks">GET routes to obtain the tasks</a></h2>
<p>We will write two GET routes.
The <code>/task</code> GET route will return all tasks as a JSON dictionary.
The <code>/task/:id</code> GET route will return the task by its ID.
For example <code>/task/d7b74e8f-34bc-4c11-9260-9369102c53f6</code> will return a JSON representing the first task.
Here is the <code>/task</code> route:</p>
<pre><code class="language-javascript">app.get('/task', (req, res) =&gt; {
  res.send(tasks);
});
</code></pre>
<blockquote>
<p>Just like in chapter 3.1, you should put the all the routes above the call to <code>app.listen</code>.</p>
</blockquote>
<p>The second route is a bit more complex since it is a <strong>dynamic route</strong>, i.e. it takes additional parameters (namely the task ID).
Lucky for us, Express has support for dynamic routes.
We can use <code>req.params</code> to get the named URL segments (like an ID).
Let us take the following GET route:</p>
<pre><code class="language-javascript">app.get('/users/:userId/tasks/:taskId/subtasks/:subTaskId', (req, res) =&gt; {
  res.send(req.params);
});
</code></pre>
<p>If we try to query <code>/users/1/tasks/2/subtasks/3</code> this route will be matched and <code>req.params</code> will be the following dictionary:</p>
<pre><code class="language-javascript">{ userId: '1', taskId: '2', subTaskId: '3' }
</code></pre>
<blockquote>
<p>Try adding <code>console.log(req.params)</code> to see the contents of <code>req.params</code>.
As a general side note - <code>console.log</code> is a very useful tool if you want to peek into the contents of a value to understand its structure.</p>
</blockquote>
<p>Based on this, the <code>/task/:id</code> route should look as follows:</p>
<pre><code class="language-javascript">app.get('/task/:id', (req, res) =&gt; {
  const taskId = req.params.id;
  res.send(tasks[taskId]);
});
</code></pre>
<p>Now that you have created the two routes, start the server with <code>node app.js</code>.
If you navigate to <code>http://localhost:3000/task</code>, you will see:</p>
<pre><code class="language-json">{
  &quot;00b2a368-5269-4cee-9cdc-efab98f8b54a&quot;: {
    &quot;summary&quot;: &quot;Read the MERN book&quot;,
    &quot;description&quot;: &quot;Read and understand the MERN book.&quot;
  },
  &quot;d7b74e8f-34bc-4c11-9260-9369102c53f6&quot;: {
    &quot;summary&quot;: &quot;Write a task app&quot;,
    &quot;description&quot;: &quot;Write an awesome task app.&quot;
  }
}
</code></pre>
<p>If you navigate to <code>http://localhost:3000/task/d7b74e8f-34bc-4c11-9260-9369102c53f6</code>, you will see the second task:</p>
<pre><code class="language-json">{
  &quot;summary&quot;: &quot;Write a task app&quot;,
  &quot;description&quot;: &quot;Write an awesome task app.&quot;
}
</code></pre>
<h2 id="a-post-route-to-create-tasks"><a class="header" href="#a-post-route-to-create-tasks">A POST route to create tasks</a></h2>
<p>To create a task, we will use a POST route.
Remember that we obtain the data from the POST body by accessing <code>req.body</code>.
We need to generate random task IDs when creating a task, so don't forget to <code>require</code> the <code>uuid</code> module.</p>
<pre><code class="language-javascript">const express = require('express');
const { v4: uuidv4 } = require('uuid');

// ... your code ...

app.post('/task', (req, res) =&gt; {
  const taskId = uuidv4();
  tasks[taskId] = { summary: req.body.summary, description: req.body.description };
  res.send(tasks[taskId]);
});
</code></pre>
<p>We return <code>tasks[taskId]</code> because it is customary to return the newly created resource when the request creates a new resource.</p>
<p>Here is the curl command to create a new task:</p>
<pre><code class="language-sh">curl -X POST -H &quot;Content-Type: application/json&quot; -d '{&quot;summary&quot;: &quot;Think of a funny joke&quot;, &quot;description&quot;: &quot;Come up with a funny joke to lighten the mood.&quot;}' http://localhost:3000/task
</code></pre>
<p>If you create the <code>/task</code> GET route, you will see that an additional task is now present.</p>
<h2 id="a-put-route-to-update-tasks"><a class="header" href="#a-put-route-to-update-tasks">A PUT route to update tasks</a></h2>
<p>We can update a task via a PUT request:</p>
<pre><code class="language-javascript">app.put('/task/:id', (req, res) =&gt; {
  const taskId = req.params.id;
  tasks[taskId].summary = req.body.summary;
  tasks[taskId].description = req.body.description;
  res.send(tasks[req.params.id]);
});
</code></pre>
<p>Here is a <code>curl</code> command that updates the task with the ID <code>d7b74e8f-34bc-4c11-9260-9369102c53f6</code> to change its summary and description:</p>
<pre><code class="language-sh">curl -X PUT -H &quot;Content-Type: application/json&quot; -d '{&quot;summary&quot;: &quot;Do something else&quot;, &quot;description&quot;: &quot;Make something interesting happen.&quot;}' &quot;http://localhost:3000/task/d7b74e8f-34bc-4c11-9260-9369102c53f6&quot;
</code></pre>
<h2 id="a-delete-route-to-delete-tasks"><a class="header" href="#a-delete-route-to-delete-tasks">A DELETE route to delete tasks</a></h2>
<p>We can delete tasks via a DELETE request:</p>
<pre><code class="language-javascript">app.delete('/task/:id', (req, res) =&gt; {
  const deletedTask = tasks[taskId];
  delete tasks[taskId];
  res.send(deletedTask);
});
</code></pre>
<p>Here is a <code>curl</code> command that deletes the task with the ID <code>d7b74e8f-34bc-4c11-9260-9369102c53f6</code>:</p>
<pre><code class="language-sh">curl -X DELETE http://localhost:3000/task/d7b74e8f-34bc-4c11-9260-9369102c53f6
</code></pre>
<h2 id="error-handling"><a class="header" href="#error-handling">Error handling</a></h2>
<p>Theoretically all the routes are in place now, but if you would submit this server for a review by your fellow developers, they would probably not approve of this (and not just because we are storing the tasks in a global variable instead of using a database).
The reason for that is we have no error handling.
Essentially our application assumes that the user of our API will submit only valid requests and nothing bad will ever happen.</p>
<p><em>This is a terrible assumption to make and if you make this assumption, inevitable sleepless nights await you.</em></p>
<p><em>We are dead serious.</em></p>
<p>Programming that assumes nothing bad will ever happen is called <em>happy path programming</em>.
The <strong>happy path</strong> is the &quot;default&quot; program workflow, where nothing exceptional happens.
In our current implementation of the API we assume that the user will never do anything wrong, like trying to read a task with an ID that doesn't exist.
But of course that will inevitably happen.
Therefore let us make our API robust against such accidents.</p>
<p>First, we should check that the ID the user is trying to view is valid.
If the ID does not exist, we will return a response with status code 404, which means &quot;Not found&quot;.</p>
<pre><code class="language-javascript">app.get('/task/:id', (req, res) =&gt; {
  const taskId = req.params.id;
  if (!(id in tasks)) {
    res.sendStatus(404);
  }
  res.send(tasks[taskId]);
});
</code></pre>
<p>We will need similar checks when trying to update or delete an ID.
This is the new PUT route:</p>
<pre><code class="language-javascript">app.put('/task/:id', (req, res) =&gt; {
  const taskId = req.params.id;
  if (!(taskId in tasks)) {
    res.sendStatus(404);
  }
  tasks[taskId].summary = req.body.summary;
  tasks[taskId].description = req.body.description;
  res.send(tasks[taskId]);
});
</code></pre>
<p>And this is the new DELETE route:</p>
<pre><code class="language-javascript">app.delete('/task/:id', (req, res) =&gt; {
  const taskId = req.params.id;
  if (!(taskId in tasks)) {
    res.sendStatus(404);
  }
  const deletedTask = tasks[taskId];
  delete tasks[taskId];
  res.send(deletedTask);
});
</code></pre>
<p>There is one more problem we need to address.
Currently our POST and PUT requests assume that <code>summary</code> and <code>description</code> will always be present in the body.
But what if the user submits a POST request without these fields?
In that case the task will not be updated or created correctly.
Therefore we should check for the presence of the <code>summary</code> and <code>description</code> fields in the POST body and return a status code 400 (Bad Request) in case these fields are missing.
For example this is how the new and improved PUT request might look like:</p>
<pre><code class="language-javascript">app.put('/task/:id', (req, res) =&gt; {
  const taskId = req.params.id;
  if (!(summary in req.body) or !(description in req.body)) {
  	res.sendStatus(400);
  }
  if (!(taskId in tasks)) {
  	res.sendStatus(404);
  }
  tasks[taskId].summary = req.body.summary;
  tasks[taskId].description = req.body.description;
  res.send(tasks[taskId]);
});
</code></pre>
<p>Later we will learn a more intelligent way to validate fields in POST request bodies without all this boilerplate, but for now this will do.</p>
<p>We have a working API now (except for that thing with the global variable which we will replace in chapter 4)!
Now our client has to actually use it, so let us go ahead and make some changes to the client.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
