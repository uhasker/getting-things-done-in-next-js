<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Modules</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="modules"><a class="header" href="#modules">Modules</a></h2>
<div style="text-align: right"> <i> A wise coder knows that exporting too much is like opening all doors of the house; both invite unexpected guests. <br> — Ancient Chinese proverb </i> </div>
<h3 id="module-system"><a class="header" href="#module-system">Module System</a></h3>
<p>At the moment, the scripts we write are not large and easily fit into a single file.
However, as we begin writing our task application, we will run into the problem that if we try to fit our entire project into a single file, that file will quickly become unreadable and unmaintainable.</p>
<p>Additionally, we might often want to use third-party libraries (i.e. libraries written by someone else) in our project.
Copy and pasting the code from a third-party library seems like an obviously bad idea.
First, this would make our scripts even less readable.
Second, what do we do if the library receives an update?</p>
<p>Luckily, JavaScript provides us with a mechanism to use code from one file in another file—<strong>modules</strong>.</p>
<blockquote>
<p>We will mostly discuss ECMAScript modules (ESM).
There are other module systems, but we will only cover them very briefly and only use them for minor examples.
Especially for the final project, we will only use ESM.</p>
</blockquote>
<h3 id="the-import-and-export-keywords"><a class="header" href="#the-import-and-export-keywords">The <code>import</code> and <code>export</code> Keywords</a></h3>
<p>Let's start our module discussion with a very simple example.
We will create a file containing a function and then try to use that function in another file.</p>
<p>Create a file <code>greeter.js</code> containing the following code:</p>
<pre><code class="language-js">export function greet(name) {
  return `Hello, ${name}!`;
}
</code></pre>
<p>Note the <code>export</code> keyword here.
This <strong>exports</strong> the <code>greet</code> function, i.e. it tells JavaScript to make this function available to other files.</p>
<p>We can now <strong>import</strong> the <code>greet</code> function in another file.
Create a file <code>main.js</code> in which we try to use the <code>greet</code> function:</p>
<pre><code class="language-js">import { greet } from './greeter.js';

console.log(greet('World'));
</code></pre>
<p>This is the basic setup, but in order to actually execute this in the browser or in Node.js we need to make some more adjustments.</p>
<h3 id="esm-in-the-browser"><a class="header" href="#esm-in-the-browser">ESM in the Browser</a></h3>
<p>Let's create a file named <code>index.html</code> in which we use <code>main.js</code> as a JavaScript module:</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;meta charset="UTF-8" /&gt;
    &lt;title&gt;ESM Demo&lt;/title&gt;
  &lt;/head&gt;

  &lt;body&gt;
    &lt;script type="module" src="main.js"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>If you just try to open <code>index.html</code> in the browser, you will a CORS Error:</p>
<pre><code>Access to script at 'file:///.../main.js' from origin 'null' has been blocked by
CORS policy: Cross origin requests are only supported for protocol schemes:
http, data, isolated-app, chrome-extension, chrome, https, chrome-untrusted.
</code></pre>
<p>We won't go into the details of CORS, but basically this error happens because ECMAScript modules are subject to the same-origin policy.
We therefore need to serve our files over a server instead of just trying to open them in our browser.</p>
<p>Let's install the <code>http-server</code> package:</p>
<pre><code class="language-sh">pnpm add -g http-server
</code></pre>
<blockquote>
<p>The <code>-g</code> flag tells <code>pnpm</code> to install the package globally and not just for a particular project.
This is similar to the <code>-g</code> flag for <code>npm</code>.</p>
</blockquote>
<p>Now, enter the directory where you've stored <code>index.html</code>, <code>main.js</code> and <code>greeter.js</code> and execute the following command:</p>
<pre><code class="language-sh">http-server .
</code></pre>
<p>Go to <code>http://localhost:8080</code>, open the console and you should see <code>Hello, World!</code> in your console.</p>
<h3 id="esm-in-nodejs"><a class="header" href="#esm-in-nodejs">ESM in Node.js</a></h3>
<p>To use <code>main.js</code> and <code>greeter.js</code> in Node.js, we will need to create a <strong>project</strong>.
Therefore you need to create the following <code>package.json</code> file in the same directory as <code>main.js</code> and <code>greeter.js</code>:</p>
<pre><code>{
  "name": "projectname",
  "version": "1.0.0",
  "main": "main.js",
  "type": "module"
}
</code></pre>
<blockquote>
<p>Note that it is very important that you specify <code>type</code> as <code>module</code>.
This tells node to interpret JavaScript files as using ESM syntax (which is what we use in this section).</p>
</blockquote>
<p>You can then execute <code>main.js</code> by running:</p>
<pre><code class="language-sh">node main.js
</code></pre>
<blockquote>
<p>We will return to the concept of <code>package.json</code> in more detail later.</p>
</blockquote>
<h3 id="named-exports-and-imports"><a class="header" href="#named-exports-and-imports">Named Exports and Imports</a></h3>
<p>The example above showed the use of <strong>named exports</strong>.
Here, each function is referred by its name when exporting and the same name is used when importing.
You can export multiple functions when performing named exports.</p>
<p>You can create a named export by prefixing a function with the <code>export</code> keyword:</p>
<pre><code class="language-js">export function getGreeting(name) {
  return `Hello, ${name}!`;
}

export function greet(name) {
  console.log(getGreeting(name));
}
</code></pre>
<p>Alternatively, you can use an <strong>export list</strong>:</p>
<pre><code class="language-js">function getGreeting(name) {
  return `Hello, ${name}`;
}

function greet(name) {
  console.log(getGreeting(name));
}

export { getGreeting, greet };
</code></pre>
<p>You should use named exports if you need to export several values/functions.</p>
<p>Note that you can rename exports in an export list:</p>
<pre><code class="language-js">function getImportantGreeting(name) {
  return `Hello, ${name}!`;
}

export { getImportantGreeting as getGreeting };
</code></pre>
<p>If you need to import multiple functions, you can do that as well:</p>
<pre><code class="language-js">import { getGreeting, greet } from './greet.js';
</code></pre>
<p>You can also rename imports:</p>
<pre><code class="language-js">import { getGreeting, greet as sayHello } from './greet.js';
</code></pre>
<p>This is useful if you have several modules that export functions with a same name.
For example if you had a module <code>greet</code> that exports the function <code>greet</code> and a module <code>other-greet</code> that exports the function <code>greet</code> as well, you would run into problems if you just tried to import <code>greet</code>:</p>
<pre><code class="language-js">import { greet } from './greet.js';
import { greet } from './other-greet.js';
</code></pre>
<p>Instead you could rename one or both greet functions:</p>
<pre><code class="language-js">import { greet } from './greet.js';
import { greet as otherGreet } from './other-greet.js';
</code></pre>
<h3 id="default-exports-and-imports"><a class="header" href="#default-exports-and-imports">Default Exports and Imports</a></h3>
<p>If you want to have a default function provided by your module, you can use a <strong>default export</strong>:</p>
<pre><code class="language-js">function getGreeting(name) {
  return `Hello, ${name}!`;
}

export default function greet(name) {
  console.log(getGreeting(name));
}
</code></pre>
<p>Alternatively you could write:</p>
<pre><code class="language-js">function getGreeting(name) {
  return `Hello, ${name}!`;
}

function greet(name) {
  console.log(getGreeting(name));
}

export default greet;
</code></pre>
<p>You could also write:</p>
<pre><code class="language-js">function getGreeting(name) {
  return `Hello, ${name}!`;
}

function greet(name) {
  console.log(getGreeting(name));
}

export { greet as default };
</code></pre>
<p>Note that you <em>can't have more than one default export</em>.
This means that you should use default exports when you have one very important value or function that you'd like to export.</p>
<p>You can import a <code>default</code> exported value like this:</p>
<pre><code class="language-js">import greet from './greet.js';

console.log(greet('World'));
</code></pre>
<p>Alternatively, you could use the <code>default as</code> syntax:</p>
<pre><code class="language-js">import { default as greet } from './greet.js';

console.log(greet('World'));
</code></pre>
<p>Note that you can import the <code>default</code> exported value using any name you like:</p>
<pre><code class="language-js">import thingy from './greet.js';
</code></pre>
<h3 id="namespace-imports"><a class="header" href="#namespace-imports">Namespace Imports</a></h3>
<p>If you wish to avoid name conflicts (like in the <code>greet</code> situation presented previously) you can do even better with namespace imports:</p>
<pre><code class="language-js">import * as greet from './greet.js';

greet.getGreeting('World');
</code></pre>
<p>The <code>import * as</code> syntax retrieves all exports available in <code>greet.js</code>, creates a <strong>namespace object</strong> <code>greet</code> and makes all the exports available as a member of that object.
This means that the <code>greet</code> conflict can be resolved like this:</p>
<pre><code class="language-js">import * as greetModule from './greet.js';
import * as otherGreetModule from './other-greet.js';

greetModule.greet('World');
otherGreetModule.greet('World');
</code></pre>
<h3 id="module-scope"><a class="header" href="#module-scope">Module Scope</a></h3>
<p>You already know the global scope, the function scope and the block scope.
Now that we've introduced modules, there is one more scope you should know about—the <strong>module scope</strong>.</p>
<p>As the name already says this is the scope of a module and each module has its own scope.
This means that variables and functions declared in a module are <em>not visible to code outside the module</em> unless they are explicitly exported.
Even if a variable or a function is explicitly exported it can't be used in outside code unless it has been explicitly imported first.</p>
<p>This ensures that modules don't accidentally interfere with each other.</p>
<p>Consider this example:</p>
<pre><code class="language-js">function getGreeting(name) {
  return `Hello, ${name}!`;
}

export function greet(name) {
  console.log(getGreeting(name));
}
</code></pre>
<p>Here the <code>getGreeting</code> function is not exported, meaning that it will remain <em>completely private</em> to the module.
Only the <code>greet</code> function can be used (since it's exported).</p>
<p>Let's try importing <code>getGreeting</code>:</p>
<pre><code class="language-js">import { greet, getGreeting } from './greet.js';
</code></pre>
<p>You will get the following error:</p>
<pre><code>import { greet, getGreeting } from './greet.js';
                ^^^^^^^^^^^
SyntaxError: The requested module './greet.js' does not provide an export named 'getGreeting'
</code></pre>
<h3 id="cjs-modules"><a class="header" href="#cjs-modules">CJS Modules</a></h3>
<p>So far, we've been discussing ECMAScript modules (ESM).
One alternative to ESM is a module system called CommonJS (CJS for short).</p>
<p>You can export objects in CJS using <code>module.exports</code> and import objects in CJS using <code>require()</code>.</p>
<p>Let's rewrite our running example in CJS.
If you're following along, you should create a separate directory for this example.</p>
<p>Create a file <code>greet.js</code> and export functions using <code>module.exports</code>:</p>
<pre><code class="language-js">function getGreeting(name) {
  return `Hello, ${name}!`;
}

function greet(name) {
  console.log(getGreeting(name));
}

// Exporting the functions
module.exports = { getGreeting, greet };
</code></pre>
<p>And now create a file <code>app.js</code> where you import the functions from <code>greet.js</code> using <code>require()</code>:</p>
<pre><code class="language-js">// Importing the module
const { getGreeting, greet } = require('./greet');

console.log(getGreeting('World')); // Hello, World!
greet('World'); // Hello, World!
</code></pre>
<p>You can now run the <code>greet.js</code> without any additional configuration (you don't even need a <code>package.json</code>):</p>
<pre><code class="language-sh">node app.js
</code></pre>
<p>We will only use CJS for short Node.js examples where we want to avoid the setup of a new project.
However, other than that, we will follow the current best practices and only use ESM throughout this book.
This is mainly because CJS is an older module system that was designed exclusively for Node.js and has been mostly replaced by ESM.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../chapter1/10-asynchronous-programming.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../chapter1/12-packages.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../chapter1/10-asynchronous-programming.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../chapter1/12-packages.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
