<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Packages</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="packages"><a class="header" href="#packages">Packages</a></h2>
<div style="text-align: right"> <i>A prudent developer tends node_modules as a garden, lest it overgrow and obscure the path to enlightenment. <br> — Ancient Chinese proverb </i> </div>
<h3 id="creating-a-package"><a class="header" href="#creating-a-package">Creating a Package</a></h3>
<p>The heart of any JavaScript package is the <code>package.json</code> file.
This should contain JSON with important information about the package like its name, version, and many other things.</p>
<p>Here is the minimal <code>package.json</code>:</p>
<pre><code class="language-json">{
  "name": "example-package",
  "version": "1.0.0"
}
</code></pre>
<p>The <code>version</code> field follows a convention called SemVer (short for Semantic Versioning).
This defines that any version of a package (or library) should have the format <code>MAJOR.MINOR.PATCH</code> where <code>MAJOR</code>, <code>MINOR</code>, and <code>PATCH</code> are non-negative integers.
Whenever you update a package, you should make a change to the package version.</p>
<p>This might be a change to either <code>MAJOR</code>, <code>MINOR</code> or <code>PATCH</code>, depending on the kind of change you make.
Most importantly, you should ask yourself if the change is <em>backwards compatible</em> with the old version of the package.</p>
<p>A change is backwards compatible if a user of the old package can switch to your new package without any issues.
For example, if you simply add a new function to your package, then that change is backwards compatible.
This is also true if you change some code in a function without changing the <em>functionality</em> of the function.</p>
<p>However, if you change the way an existing package function works, the change is no longer backwards compatible.
If a user of your package now tries to switch from the old version to the new version, all the calls to that function will no longer work.
Programmers call this "breaking the package".</p>
<p>If you make such a backwards incompatible change, you should increment the <code>MAJOR</code> number and reset the other numbers.
For example, if you release a big update of a package with the version <code>1.32.2</code> where you change a lot of function signatures you should update the version to <code>2.0.0</code>.</p>
<p>If you add functionality in a backwards compatible manner, you should increment the <code>MINOR</code> number and reset the <code>PATCH</code> number.
For example, if you release an update of a package with the version <code>1.32.2</code> and you add a couple of new functions you should update the version to <code>1.33.0</code>.</p>
<p>If you just make backwards compatible bug fixes, you should increment the <code>PATCH</code> number.
For example, if you release an update of a package with the version <code>1.32.2</code> and you fix a bug in one of your functions you should update the version to <code>1.32.3</code>.</p>
<p>The <code>main</code> field can be used to specify the entry point of your package.
This is the primary file that will be loaded if your package is required by a Node.js application.</p>
<p>Since we use ESM for our modules, we will also need to specify <code>"type": "module"</code> in our <code>package.json</code>.</p>
<p>For example, if we want <code>index.js</code> to be the entry point of our package, we would need to specify the following <code>package.json</code> file:</p>
<pre><code class="language-json">{
  "name": "example-package",
  "version": "1.0.0",
  "type": "module",
  "main": "index.js"
}
</code></pre>
<p>Next, let's create an ESM module <code>index.js</code>:</p>
<pre><code class="language-js">export function greet(name) {
  console.log(`Hello ${name}`);
}
</code></pre>
<p>You can now use the <code>greet</code> function of your package in other packages that import it.</p>
<blockquote>
<p>We will show an example of this in a second.</p>
</blockquote>
<h3 id="installing-dependencies"><a class="header" href="#installing-dependencies">Installing Dependencies</a></h3>
<p>To install dependencies, you will need a package manager like <code>npm</code> or <code>pnpm</code>.
The main difference between these is that <code>pnpm</code> stores packages globally meaning that if multiple projects use the same package, <code>pnpm</code> will only store it once and then link to it as needed.
We use <code>pnpm</code> throughout this book.</p>
<p>There is also a difference between dependencies and "dev" dependencies.
Regular dependencies are packages that your project needs to run.
"Dev" dependencies are packages that are only needed during development or testing.
These will not be included in the final production build of your package (the final production build is the code that will actually be deployed to your users' devices).</p>
<p>You can install a dependency by running <code>pnpm add $PACKAGE_NAME</code> in the project directory.
You can install a "dev" dependency by running <code>pnpm add --save-dev $PACKAGE_NAME</code> instead.</p>
<p>Let's install the <code>lodash</code> dependency which is a widely used utility library:</p>
<pre><code class="language-js">pnpm add lodash
</code></pre>
<p>The dependency will now appear in your <code>package.json</code>:</p>
<pre><code class="language-json">{
  "name": "example-package",
  "version": "1.0.0",
  "type": "module",
  "main": "index.js",
  "dependencies": {
    "lodash": "^4.17.21"
  }
}
</code></pre>
<p>You will also see a <code>pnpm-lock.yaml</code> which specifies the locked package versions:</p>
<pre><code class="language-yaml">lockfileVersion: '6.0'

settings:
  autoInstallPeers: true
  excludeLinksFromLockfile: false

dependencies:
  lodash:
    specifier: ^4.17.21
    version: 4.17.21

packages:
  /lodash@4.17.21:
    resolution:
      {
        integrity: sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==,
      }
    dev: false
</code></pre>
<p>The actual package will be located in the <code>node_modules</code> directory (more specifically, at <code>node_modules/lodash</code>).</p>
<blockquote>
<p>Don't be afraid of the <code>node_modules</code> directory.
There is no black magic there—<code>node_modules</code> simply contains the code of the dependencies you've installed.
In fact, we encourage you to browse through the <code>node_modules/lodash</code> directory and realize that it's just regular JavaScript code.</p>
</blockquote>
<p>Let's now use <code>lodash</code> in our <code>index.js</code>:</p>
<pre><code class="language-js">import _ from 'lodash';

console.log(_.capitalize('hello, World!'));
</code></pre>
<p>Execute the file by running <code>node index.js</code>.
This should output:</p>
<pre><code>Hello, World!
</code></pre>
<h3 id="scripts"><a class="header" href="#scripts">Scripts</a></h3>
<p>To simplify running scripts, the <code>package.json</code> allows you to define a <code>scripts</code> field:</p>
<pre><code class="language-json">{
  "name": "example-package",
  "version": "1.0.0",
  "type": "module",
  "main": "index.js",
  "dependencies": {
    "lodash": "^4.17.21"
  },
  "scripts": {
    "greet": "node index.js"
  }
}
</code></pre>
<p>Now you can run:</p>
<pre><code class="language-sh">pnpm run greet
</code></pre>
<p>This will again output <code>Hello, World!</code>.</p>
<p>The <code>scripts</code> mechanism becomes especially useful if you need to execute a lot of commands to achieve a result.
Instead of repeating those commands over and over again, you can specify a script and then just run that script.</p>
<h3 id="publishing-packages"><a class="header" href="#publishing-packages">Publishing Packages</a></h3>
<p>Let's return to our package from the beginning of this section.</p>
<p>We had this <code>package.json</code> file:</p>
<pre><code class="language-json">{
  "name": "example-package",
  "version": "1.0.0",
  "type": "module",
  "main": "index.js"
}
</code></pre>
<p>And we had this ESM module <code>index.js</code>:</p>
<pre><code class="language-js">export function greet(name) {
  console.log(`Hello ${name}`);
}
</code></pre>
<p>What if we want to make this package available to other people?
We could <strong>publish</strong> our package to the npm repository.
This is in fact where we pulled the <code>lodash</code> package from earlier.</p>
<blockquote>
<p>Please don't actually publish this silly example package to the npm repository.
It's already plenty polluted as it is.
However, the steps outlined below will be useful to you, if you plan to actually publish something interesting.</p>
</blockquote>
<p>The publishing process is pretty simple:</p>
<p>First, you need to create an account at <code>npmjs.com</code>.</p>
<p>Second, you need to log in to your account in your terminal by running:</p>
<pre><code class="language-sh">npm login
</code></pre>
<p>Third, you will need to publish the package by running:</p>
<pre><code class="language-sh">pnpm publish --access public
</code></pre>
<p>After you're done, you can verify that the package was published successfully by going to <code>https://www.npmjs.com/package/$YOUR_PACKAGE_NAME</code>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../chapter1/11-modules.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../chapter1/13-writing-decent-code.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../chapter1/11-modules.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../chapter1/13-writing-decent-code.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
