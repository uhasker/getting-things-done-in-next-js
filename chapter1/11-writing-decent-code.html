<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Writing Decent Code</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="../title-page.html">Getting Things Done in Next.js</a></li><li class="chapter-item expanded affix "><a href="../introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><a href="../acknowledgments.html">Acknowledgments</a></li><li class="chapter-item expanded "><a href="../chapter1/index.html"><strong aria-hidden="true">1.</strong> A Brief Introduction to JavaScript</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter1/01-hello-world.html"><strong aria-hidden="true">1.1.</strong> Hello World</a></li><li class="chapter-item expanded "><a href="../chapter1/02-primitive-data-types.html"><strong aria-hidden="true">1.2.</strong> Primitive Data Types</a></li><li class="chapter-item expanded "><a href="../chapter1/03-arrays-and-objects.html"><strong aria-hidden="true">1.3.</strong> Arrays and Objects</a></li><li class="chapter-item expanded "><a href="../chapter1/04-control-flow.html"><strong aria-hidden="true">1.4.</strong> Control Flow</a></li><li class="chapter-item expanded "><a href="../chapter1/05-functions.html"><strong aria-hidden="true">1.5.</strong> Functions</a></li><li class="chapter-item expanded "><a href="../chapter1/06-error-handling.html"><strong aria-hidden="true">1.6.</strong> Error Handling</a></li><li class="chapter-item expanded "><a href="../chapter1/07-basic-datastructures.html"><strong aria-hidden="true">1.7.</strong> Basic Data Structures</a></li><li class="chapter-item expanded "><a href="../chapter1/08-functional-thinking.html"><strong aria-hidden="true">1.8.</strong> Functional Thinking</a></li><li class="chapter-item expanded "><a href="../chapter1/09-asynchronous-programming.html"><strong aria-hidden="true">1.9.</strong> Asynchronous Programming</a></li><li class="chapter-item expanded "><a href="../chapter1/10-modules.html"><strong aria-hidden="true">1.10.</strong> Modules</a></li><li class="chapter-item expanded "><a href="../chapter1/11-writing-decent-code.html" class="active"><strong aria-hidden="true">1.11.</strong> Writing Decent Code</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter2/index.html"><strong aria-hidden="true">2.</strong> Leveling Up with TypeScript</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter2/01-why-typescript.html"><strong aria-hidden="true">2.1.</strong> Why TypeScript?</a></li><li class="chapter-item expanded "><a href="../chapter2/02-basic-types.html"><strong aria-hidden="true">2.2.</strong> Basic Types</a></li><li class="chapter-item expanded "><a href="../chapter2/03-annotating-functions.html"><strong aria-hidden="true">2.3.</strong> Annotating Functions</a></li><li class="chapter-item expanded "><a href="../chapter2/04-union-types.html"><strong aria-hidden="true">2.4.</strong> Union Types</a></li><li class="chapter-item expanded "><a href="../chapter2/05-generics.html"><strong aria-hidden="true">2.5.</strong> Generics</a></li><li class="chapter-item expanded "><a href="../chapter2/06-configuring-typescript.html"><strong aria-hidden="true">2.6.</strong> Configuring TypeScript</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter3/index.html"><strong aria-hidden="true">3.</strong> Networking Fundamentals</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter3/01-ips-ports-and-domains.html"><strong aria-hidden="true">3.1.</strong> IPs, Ports and Domains</a></li><li class="chapter-item expanded "><a href="../chapter3/02-an-http-primer.html"><strong aria-hidden="true">3.2.</strong> An HTTP Primer</a></li><li class="chapter-item expanded "><a href="../chapter3/03-more-on-http.html"><strong aria-hidden="true">3.3.</strong> More on HTTP</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter4/index.html"><strong aria-hidden="true">4.</strong> A Vanilla Client</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter4/01-hypertext-markup-language.html"><strong aria-hidden="true">4.1.</strong> Hypertext Markup Language</a></li><li class="chapter-item expanded "><a href="../chapter4/02-marking-up-text.html"><strong aria-hidden="true">4.2.</strong> Marking Up Text</a></li><li class="chapter-item expanded "><a href="../chapter4/03-hyperlinks-and-images.html"><strong aria-hidden="true">4.3.</strong> Hyperlinks and Images</a></li><li class="chapter-item expanded "><a href="../chapter4/04-the-document-object-model.html"><strong aria-hidden="true">4.4.</strong> The Document Object Model</a></li><li class="chapter-item expanded "><a href="../chapter4/05-web-forms.html"><strong aria-hidden="true">4.5.</strong> Web Forms</a></li><li class="chapter-item expanded "><a href="../chapter4/06-a-simple-client.html"><strong aria-hidden="true">4.6.</strong> A Simple Client</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter5/index.html"><strong aria-hidden="true">5.</strong> Adding Spice with React</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter5/01-react-components.html"><strong aria-hidden="true">5.1.</strong> React Components</a></li><li class="chapter-item expanded "><a href="../chapter5/02-react-state.html"><strong aria-hidden="true">5.2.</strong> React State</a></li><li class="chapter-item expanded "><a href="../chapter5/03-react-effects.html"><strong aria-hidden="true">5.3.</strong> React Effects</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter6/index.html"><strong aria-hidden="true">6.</strong> Moving to the Server with Next.js</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter6/01-setup.html"><strong aria-hidden="true">6.1.</strong> Setup</a></li><li class="chapter-item expanded "><a href="../chapter6/02-pages-and-layouts.html"><strong aria-hidden="true">6.2.</strong> Pages and Layouts</a></li><li class="chapter-item expanded "><a href="../chapter6/03-more-on-routes.html"><strong aria-hidden="true">6.3.</strong> More on Routes</a></li><li class="chapter-item expanded "><a href="../chapter6/04-server-and-client-components.html"><strong aria-hidden="true">6.4.</strong> Server and Client Components</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter7/index.html"><strong aria-hidden="true">7.</strong> Becoming Pretty with Tailwind CSS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter7/01-setup.html"><strong aria-hidden="true">7.1.</strong> Setup</a></li><li class="chapter-item expanded "><a href="../chapter7/02-typography-utilities.html"><strong aria-hidden="true">7.2.</strong> Typography Utilities</a></li><li class="chapter-item expanded "><a href="../chapter7/03-background-utilities.html"><strong aria-hidden="true">7.3.</strong> Background Utilities</a></li><li class="chapter-item expanded "><a href="../chapter7/04-size-utilities.html"><strong aria-hidden="true">7.4.</strong> Size Utilities</a></li><li class="chapter-item expanded "><a href="../chapter7/05-border-utilities.html"><strong aria-hidden="true">7.5.</strong> Border Utilities</a></li><li class="chapter-item expanded "><a href="../chapter7/06-spacing-utilities.html"><strong aria-hidden="true">7.6.</strong> Spacing Utilities</a></li><li class="chapter-item expanded "><a href="../chapter7/07-flexbox.html"><strong aria-hidden="true">7.7.</strong> Flexbox</a></li><li class="chapter-item expanded "><a href="../chapter7/08-grid.html"><strong aria-hidden="true">7.8.</strong> Grid</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter8/index.html"><strong aria-hidden="true">8.</strong> Persistence with SQL</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter8/01-setup.html"><strong aria-hidden="true">8.1.</strong> Setup</a></li><li class="chapter-item expanded "><a href="../chapter8/02-inserting-updating-and-deleting-data.html"><strong aria-hidden="true">8.2.</strong> Inserting, Updating and Deleting Data</a></li><li class="chapter-item expanded "><a href="../chapter8/03-selecting-rows.html"><strong aria-hidden="true">8.3.</strong> Selecting Data</a></li><li class="chapter-item expanded "><a href="../chapter8/04-multiple-tables.html"><strong aria-hidden="true">8.4.</strong> Multiple Tables</a></li></ol></li><li class="chapter-item expanded "><a href="../chapter9/index.html"><strong aria-hidden="true">9.</strong> Type-safe SQL with Drizzle</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../chapter9/01-setup.html"><strong aria-hidden="true">9.1.</strong> Setup</a></li><li class="chapter-item expanded "><a href="../chapter9/02-inserting-updating-and-deleting-data.html"><strong aria-hidden="true">9.2.</strong> Inserting, Updating and Deleting Data</a></li><li class="chapter-item expanded "><a href="../chapter9/03-selecting-rows.html"><strong aria-hidden="true">9.3.</strong> Selecting Data</a></li><li class="chapter-item expanded "><a href="../chapter9/04-multiple-tables.html"><strong aria-hidden="true">9.4.</strong> Multiple Tables</a></li><li class="chapter-item expanded "><a href="../chapter9/05-migrations.html"><strong aria-hidden="true">9.5.</strong> Migrations</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="writing-decent-code"><a class="header" href="#writing-decent-code">Writing Decent Code</a></h2>
<div style="text-align: right"> <i>He who writes JavaScript with simplicity, rides the dragon of efficiency; he who writes in confusion, invites the monkeys of bugs into his code. <br> â€” Ancient Chinese proverb </i> </div>
<h3 id="it-just-works"><a class="header" href="#it-just-works">It Just Works</a></h3>
<p>A common misunderstanding among beginner programmers is that if the program runs correctly, then the code must automatically be fine.
While a correctly running program is indeed better than a crashing program (a truly shocking insight for some developers), code should not only work, but also be maintainable.</p>
<p>This <strong>maintainability</strong> has two aspects:</p>
<ol>
<li>Code should be maintainable by future you in (let's say) six months.</li>
<li>Code should be maintanable by other people that are not you.</li>
</ol>
<blockquote>
<p>We wish to reiterate that there are indeed people that are not you in the world, some of which might even end up on your team.
There are programmers that tend to forget that.</p>
</blockquote>
<p>This section is aimed at giving you a few practical tips to achieve these goals.
It won't make you a great programmer, but it will help you to make your teammates hate you slightly less (which is why the section is called "writing decent code" and not "writing the greatest code of all time").</p>
<h3 id="sensible-naming"><a class="header" href="#sensible-naming">Sensible Naming</a></h3>
<p>The ultimate number one tip for writing better code is as obvious in theory, as it is complicated in practice:</p>
<p><strong>Your variables and functions should have sensible names that describe their purpose.</strong></p>
<p>Consider this simple example:</p>
<pre><code class="language-js">function f(a, s) {
  const r = [];
  for (const i of a) {
    if (i.st === s) {
      r.push(i.su);
    }
  }
  return r;
}
</code></pre>
<p>Well, this code clearly sucks.
It's absolutely unreadable and the unreadability is solely down to really terrible variable names.</p>
<p>Let's rewrite it:</p>
<pre><code class="language-js">function getTaskTitlesByStatus(tasks, status) {
  const taskTitles = [];
  for (const task of tasks) {
    if (task.status === status) {
      taskTitles.push(task.title);
    }
  }
  return taskTitles;
}
</code></pre>
<p>And suddenly the purpose of the code is clear as day.</p>
<p>The function <code>getTaskTitlesByStatus</code> gets all the titles of the tasks that have a certain status.
And we know that, because it is literally in the name of the function!</p>
<p>Not only does the function have a good name (which is important when trying to use this function), but so do the variables (which is important when we need to fix possible mistakes in this function).</p>
<p>Of course, this is a very extreme example (on purpose), but it's really incredible how often programmers give terrible names to functions and variables.
This happens even to developers that should know better.</p>
<p>We will note, that naming things is usually not as easy as in this example.
There are many legitime cases where giving something a good name is not trivial, but you should at least always try to have sensible names.
The poor soul that will have to fix your bugs, will really thank you for that.</p>
<h3 id="write-small-helper-functions"><a class="header" href="#write-small-helper-functions">Write Small Helper Functions</a></h3>
<p>Most of the time a function is not as simple as <code>getTaskTitlesByStatus</code>, which often leads to many lines of complex code that is hard to understand.
A common practice for such cases is this:</p>
<p><strong>Extract code from complicated functions into helper functions and then call the helper functions</strong>.</p>
<p>Consider a function that takes an array of tasks and returns an array of generated notifications to be shown to the user.</p>
<p>The notifications are generated for urgent tasks (i.e. tasks where the deadline is in the next two days).
Additionally, generate a notification with the number of uncompleted tasks.</p>
<p>You might write the function like this:</p>
<pre><code class="language-js">function generateNotifications(tasks) {
  const urgentTasks = [];

  let uncompletedTaskCount = 0;

  tasks.forEach((task) =&gt; {
    const today = new Date();
    const twoDaysLater = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 2);

    if (task.deadline &lt;= twoDaysLater) {
      urgentTasks.push(task);
    }

    if (task.status === 'todo' || task.status === 'inprogress') {
      uncompletedTaskCount++;
    }
  });

  const notifications = [];
  if (urgentTasks.length &gt; 0) {
    notifications.push(
      `You have ${urgentTasks.length} urgent tasks. Here they are: ${urgentTasks}.`,
    );
  }

  if (uncompletedTaskCount &gt; 0) {
    notifications.push(`You have ${uncompletedTaskCount} uncompleted tasks.`);
  }

  return notifications;
}
</code></pre>
<p>Try to read this function and understand it.
This probably takes some time, especially if you are a beginner who is not used to digesting large chunks of code quickly.</p>
<p>We can massively improve this code by splitting the function into small helper functions:</p>
<pre><code class="language-js">function findUrgentTasks(tasks) {
  const urgentTasks = [];

  const today = new Date();
  const twoDaysLater = new Date(today.getFullYear(), today.getMonth(), today.getDate() + 2);

  tasks.forEach((task) =&gt; {
    if (task.deadline &lt;= twoDaysLater) {
      urgentTasks.push(task);
    }
  });

  return urgentTasks;
}

function countUncompletedTasks(tasks) {
  let uncompletedTaskCount = 0;
  tasks.forEach((task) =&gt; {
    if (task.status === 'todo' || task.status === 'inprogress') {
      uncompletedTaskCount++;
    }
  });
  return uncompletedTaskCount;
}

function generateNotifications(tasks) {
  const urgentTasks = findUrgentTasks(tasks);
  const uncompletedTaskCount = countUncompletedTasks(tasks);

  const notifications = [];
  if (urgentTasks.length &gt; 0) {
    notifications.push(
      `You have ${urgentTasks.length} urgent tasks. Here they are: ${urgentTasks}.`,
    );
  }

  if (uncompletedTaskCount &gt; 0) {
    notifications.push(`You have ${uncompletedTaskCount} uncompleted tasks.`);
  }

  return notifications;
}
</code></pre>
<p>The <code>generateNotification</code> function is now much simpler to read.
Instead of a multiple potentially complex calculations, it contains functions where each function is responsible for exactly one complex calculation.</p>
<p>Note that the loops didn't really change, but they now do isolated things inside helper functions with sensible names.
For example the for loop that calculates the <code>uncompletedTaskCount</code> is now isolated inside the <code>countUncompletedTasks</code> function and therefore its purpose is immediately clear - even before you've read the actual loop.</p>
<h3 id="make-functions-reusable"><a class="header" href="#make-functions-reusable">Make Functions Reusable</a></h3>
<p>There are still some potential improvements that we could make here, one of which is to make the helper functions more reusable.
A practical hint for making functions more reusable is this:</p>
<p><strong>Extract values from function bodies into (default) parameters.</strong></p>
<p>For example <code>findUrgentTasks</code> calculates the future date by adding <code>2</code>.
But what if that changes, or even worse, different users can set a different number of added days for their notifications?</p>
<p>Let's move the number of added days into a default parameter:</p>
<pre><code class="language-js">function findUrgentTasks(tasks, addedDays = 2) {
  const urgentTasks = [];

  const today = new Date();
  const laterDate = new Date(today.getFullYear(), today.getMonth(), today.getDate() + addedDays);

  tasks.forEach((task) =&gt; {
    if (task.deadline &lt;= laterDate) {
      urgentTasks.push(task);
    }
  });

  return urgentTasks;
}
</code></pre>
<p>Note how we also renamed <code>twoDaysLater</code> to <code>laterDate</code> since that variable now has a more general purpose.</p>
<h3 id="know-and-use-your-language-features"><a class="header" href="#know-and-use-your-language-features">Know and Use Your Language Features</a></h3>
<p>JavaScript has drastically changed for the better in the past decade - there is no need to write code like it's 2012.
For example <code>getTaskTitlesByStatus</code> could be rewritten in a functional style:</p>
<pre><code class="language-js">function getTaskTitlesByStatus(tasks) {
  return tasks.filter((task) =&gt; task.status === status).map((task) =&gt; task.title);
}
</code></pre>
<p>Same goes for <code>findUrgentTasks</code> and <code>countUncompletedTasks</code>.
You should in fact try it.</p>
<p>Generally, the takeaway from the section is this:</p>
<p><strong>Programming languages have a wide variety of features, most of which can make your life easier. Use them.</strong></p>
<h3 id="avoid-deep-nesting"><a class="header" href="#avoid-deep-nesting">Avoid Deep Nesting</a></h3>
<p>Consider a function that filters tasks based on their status, user ID and days until deadline.
We could write it like this:</p>
<pre><code class="language-js">function filterTasks(tasks, status, userId, daysUntilDeadline) {
  const filteredTasks = [];

  for (let i = 0; i &lt; tasks.length; i++) {
    if (tasks[i].status === status) {
      if (tasks[i].assignee === userId) {
        const deadline = new Date(tasks[i].deadline);
        const today = new Date();
        const futureDate = new Date(
          today.getFullYear(),
          today.getMonth(),
          today.getDate() + daysUntilDeadline,
        );

        if (deadline &lt;= futureDate) {
          filteredTasks.push(tasks[i]);
        }
      }
    }
  }

  return filteredTasks;
}
</code></pre>
<p>This looks supremely ugly and hard to read due to the deep nesting of the code.
Luckily, this is pretty easy to fix using two very specific tricks:</p>
<p>First, we can extract the body of the for loop into a helper function:</p>
<pre><code class="language-js">function taskMatchesCriteria(task, status, userId, daysUntilDeadline) {
  if (task.status === status) {
    if (task.assignee === userId) {
      const today = new Date();
      const futureDate = new Date(
        today.getFullYear(),
        today.getMonth(),
        today.getDate() + daysUntilDeadline,
      );

      if (task.deadline &lt;= futureDate) {
        return true;
      }
    }
  }

  return false;
}

function filterTasks(tasks, status, userId, daysUntilDeadline) {
  return tasks.filter((task) =&gt; taskMatchesCriteria(task, status, userId, daysUntilDeadline));
}
</code></pre>
<p>One level of nesting gone already.</p>
<p>For the second trick, we can simplify the <code>taskMatchesCriteria</code> by either flattening the conditions or using early exits.</p>
<p>Flattening the condition is simple:</p>
<pre><code class="language-js">function taskMatchesCriteria(task, status, userId, daysUntilDeadline) {
  const today = new Date();
  const futureDate = new Date(
    today.getFullYear(),
    today.getMonth(),
    today.getDate() + daysUntilDeadline,
  );

  return task.status === status &amp;&amp; task.assignee === userId &amp;&amp; task.deadline &lt;= futureDate;
}
</code></pre>
<p>However sometimes this is not possible or leads to a very complex logical expression.
In this case we can check the "inverted" conditions one by one and "early exit" if something doesn't match:</p>
<pre><code class="language-js">function taskMatchesCriteria(task, status, userId, daysUntilDeadline) {
  // Early exit number 1
  if (task.status !== status) {
    return false;
  }

  // Early exit number 2
  if (task.assignee !== userId) {
    return false;
  }

  const today = new Date();
  const futureDate = new Date(
    today.getFullYear(),
    today.getMonth(),
    today.getDate() + daysUntilDeadline,
  );

  return task.deadline &lt;= futureDate;
}
</code></pre>
<p>The general takeaway is this:</p>
<p><strong>Flatten deeply nested code by extracting helper functions and simplifying conditions.</strong></p>
<h3 id="dont-repeat-yourself"><a class="header" href="#dont-repeat-yourself">Don't Repeat Yourself</a></h3>
<p>This is probably one of the most well-known idioms in software development:</p>
<p><strong>Don't repeat yourself.</strong></p>
<p>For example, if you write a book, you shouldn't repeat the subsection heading in your text - that looks ugly and doesn't make any sense.
Only a fool would do that.</p>
<p>The same principle goes for writing code.
Consider the following example:</p>
<pre><code class="language-js">function reportOverdueTasks(tasks) {
  const today = new Date();
  const overdueTasks = tasks.filter((task) =&gt; {
    return task.deadline &lt; today &amp;&amp; task.status !== 'done';
  });
  return overdueTasks.map((task) =&gt; `Task ID: ${task.id}, Title: ${task.title}`).join('\n');
}

function reportCompletedTasks(tasks) {
  const completedTasks = tasks.filter((task) =&gt; task.status === 'done');
  return completedTasks.map((task) =&gt; `Task ID: ${task.id}, Title: ${task.title}`).join('\n');
}
</code></pre>
<p>You might notice that the last line of both functions is essentially the same.
This leads to a problem: If the report format changes, we need to update it multiple times.</p>
<p>Not only does this mean more work, we might even forget to update the report format in some place, leading to inconsistencies in our code.</p>
<p>We can refactor <code>reportOverdueTasks</code> and <code>reportCompletedTasks</code> like this:</p>
<pre><code class="language-js">function formatReport(tasks) {
  return tasks.map((task) =&gt; `Task ID: ${task.id}, Title: ${task.title}`).join('\n');
}

function reportOverdueTasks(tasks) {
  const today = new Date();
  const overdueTasks = tasks.filter((task) =&gt; {
    return task.deadline &lt; today &amp;&amp; task.status !== 'done';
  });
  return formatReport(overdueTasks);
}

function reportCompletedTasks(tasks) {
  const completedTasks = tasks.filter((task) =&gt; task.status === 'done');
  return formatReport(completedTasks);
}
</code></pre>
<h3 id="think-about-edge-cases"><a class="header" href="#think-about-edge-cases">Think About Edge Cases</a></h3>
<p>One of the big differences between junior programmers and more senior developers is that juniors tend to ignore edge cases and just focus on the happy path.</p>
<p>Consider this piece of code:</p>
<pre><code class="language-js">const task = tasks.find((task) =&gt; task.id === taskId);
task.assignee = userId;
task.status = 'inprogress';
</code></pre>
<p>This has a big problem: What if <code>taskId</code> is not present in the IDs of <code>tasks</code>?
Then <code>task</code> will be <code>undefined</code> and our program will crash when trying to assign the <code>assignee</code> property to <code>task</code>.</p>
<p>This edge case needs to be handled:</p>
<pre><code class="language-js">const task = tasks.find((task) =&gt; task.id === taskId);
if (task === undefined) {
  console.log(`Task with ID ${taskId} not present`);
} else {
  task.assignee = userId;
  task.status = 'inprogress';
}
</code></pre>
<p>Example operations which can lead to problems if you don't consider edge cases are:</p>
<ul>
<li>division (because you could divide by zero)</li>
<li>processing strings (because strings could be empty or have whitespace at the beginning or the end)</li>
<li>extracting elements from arrays by a condition (because there might be no elements present that match the condition)</li>
<li>processing user input (because user can and will type arbitrary garbage into your application)</li>
</ul>
<p>The main takeaway from this sections is:</p>
<p><strong>Don't be satisfied by just writing the happy path. Take edge cases into consideration.</strong></p>
<h3 id="additional-tips-for-large-projects"><a class="header" href="#additional-tips-for-large-projects">Additional Tips for Large Projects</a></h3>
<p>Now that we gave you a couple of tips for writing better code, there a few things to consider as your project gets larger.</p>
<p>You should try to keep the names in your codebase close to the application domain.
If the client and the project managers talk about tasks and notifications and the UI shows big, fat texts called "Tasks" and "Notifications", then your variable names should probably not be <code>jobs</code> and <code>reports</code>.
You will just needlessly confuse everyone.</p>
<p>Split your code into well structured modules.
Try to follow the <strong>Single Responsibility Principle</strong> where every module is responsible for a particular part of the application.</p>
<p>Document your most important functions using docstrings.</p>
<p>Generally try to not outsmart yourself and stick to writing actual features instead of fancy abstractions that might or might not come in handy later.
Remember, reading and fixing code is much harder than writing it in the first place.
This means that if you write code as smart as you can, you are not going to be able to fix it.</p>
<h3 id="final-remarks"><a class="header" href="#final-remarks">Final Remarks</a></h3>
<p>Well, now that you made it through this section, are you a great programmer?
Unfortunately, the answer is a hard no.</p>
<p>If you could become a great programmer by just reading a list, then there wouldn't be entire book shelves devoted to becoming a better programmer.
You need to actually go out and write projects.
There is no way around it.</p>
<p>In the end, experience is king.
But there is one important caveat - you have to actually <em>learn</em> from that experience and reflect on your mistakes.</p>
<p>So go out there and write a feature!</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../chapter1/10-modules.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../chapter2/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../chapter1/10-modules.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../chapter2/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
